{"version":3,"sources":["utils/uuid.js","utilities/BaseUtility.ts","utilities/Echo.ts","utilities/Help.ts","nouns/Location.ts","nouns/LocationManifest.ts","store.ts","utilities/Ls.tsx","utilities/WhoAmI.ts","nouns/Item.ts","nouns/ItemManifest.ts","utilities/Look.ts","utilities/Cd.ts","utilities/Time.tsx","utilities/Pickup.ts","utilities/Inventory.ts","utilities/UtilityManifest.ts","components/TerminalBuffer.tsx","components/TerminalInput.tsx","utils/SpeechUtilities.ts","components/Terminal.tsx","components/App.tsx","index.tsx"],"names":["b","a","Math","random","toString","replace","BaseUtility","command","helpDescription","_params","Echo","args","_ref","writeToConsole","item","join","Promise","resolve","Help","length","util","UtilityManifest","concat","Object","keys","Location","descriptions","slug","classCallCheck","this","itemSlugs","neighborSlugs","loading","text","LocationManifest","hasRun","ActionTypes","initialState","location","loadingLocation","previousLocationStack","consoleInteractive","inventory","store","createStore","state","arguments","undefined","action","type","SET_LOCATION","objectSpread","value","PUSH_LOCATION_STACK","toConsumableArray","POP_LOCATION_STACK","slice","LOCK_CONSOLE","RELEASE_CONSOLE","ADD_TO_INVENTORY","src_store","getCurrentLocation","getState","LsComponent","props","react_default","createElement","places","map","place","key","className","TAB_WIDTH","items","Ls","sort","responses","WhoAmI","reduce","memo","then","speak","Item","description","locationSlug","ItemManifest","Look","_ref2","Cd","newLocation","dispatch","nullPromise","indexOf","count","match","i","goToPreviousLocation","find","setUrlLocation","TimeComponent","interval","content","Date","getTime","_this2","window","setInterval","setState","clearInterval","React","Component","Time","Time_TimeComponent","Pickup","filter","itemSlug","Inventory","TerminalBuffer","terminalHistory","Fragment","id","TerminalInput","commandHistory","currentPlaceInHistory","inputEl","focusInput","_this","focus","goBackInHistory","inputValue","goForwardInHistory","moveCursorToEnd","setTimeout","selectionStart","handleKeyDown","e","preventDefault","tabComplete","addToCommandHistory","handleSubmit","uuid","_this$inputValue$spli","split","_this$inputValue$spli2","toArray","rest","lastValue","options","newValue","option","addEventListener","removeEventListener","onKeyDown","ref","voice","speechSynthesis","getVoices","name","inputPrompt","Terminal","consoleWriters","handleKeydown","typedEvent","ctrlKey","revokeConsoleWriters","cancel","getRevocableConsoleWriter","revoked","revoke","forEach","writer","runCommand","_value$split","_value$split2","utilityName","utility","revocableConsoleWriter","push","run","catch","console","error","speechPromise","utterance","SpeechSynthesisUtterance","rate","pitch","onend","say","TerminalBuffer_TerminalBuffer","TerminalInput_TerminalInput","connect","INITIAL_LOCATION_SLUG","App","possibleConstructorReturn","getPrototypeOf","call","locations","neighbors","neighborPair","components_Terminal","ReactDOM","render","es","App_App","document","getElementById"],"mappings":"+uGAGe,SAASA,EAAEC,GACzB,OAAOA,GACHA,EAAsB,GAAhBC,KAAKC,UAAmBF,EAAI,GAAKG,SAAS,KAChD,CAAC,MAAQ,KAAO,KAAO,KAAO,MAAMC,QAAQ,SAAUL,OCCtCM,mDAKpBC,QAAkB,QAClBC,gBAA0B,mDALtBC,GACH,KAAM,2BCPaC,6MAMpBH,QAAU,SACVC,gBACC,8IAPuD,IAAlDG,EAAkDC,EAAlDD,KAEL,OADAE,EADuDD,EAA5CC,gBACI,CAAEC,KAAMH,EAAKI,KAAK,OAC1BC,QAAQC,QAAQ,aAHSX,GCCbY,6MAsBpBX,QAAU,SACVC,gBAAkB,6GAtBsC,IAAlDK,EAAkDD,EAAlDC,eAAgBF,EAAkCC,EAAlCD,KACrB,GAAIA,EAAKQ,QAAU,EAAG,CACrB,IAAMC,EAAOC,EAAgBV,EAAK,IAKlCE,EAAe,CAAEC,KAJGM,EACjBA,EAAKZ,gBADgB,2BAAAc,OAEMX,EAAKI,KAAK,KAFhB,YAMxBF,EAAe,CACdC,KAAI,0CAAAQ,OAA4CC,OAAOC,KACtDH,GACCN,KACD,MAHG,6EAQN,OAAOC,QAAQC,QAAQ,aAnBSX,kBCObmB,EACpB,SAAAA,EAAAb,GAA0C,IAA5Bc,EAA4Bd,EAA5Bc,aAAcC,EAAcf,EAAde,KAAcJ,OAAAK,EAAA,EAAAL,CAAAM,KAAAJ,GAAAI,KAO1CC,UAAsB,GAPoBD,KAQ1CE,cAA0B,GAPzBF,KAAKH,aAAeA,EACpBG,KAAKF,KAAOA,2BCPDK,EAAU,IAAIP,EAAS,CACnCE,KAAM,UACND,aAAc,CAAC,CAAEO,KAAM,cAGlBC,EAA8C,CACnDF,WAGGG,GAAkB,EA8BPD,IChCHE,EDgCGF,cChCHE,2OAoCZ,IAAMC,EAA0B,CAC/BC,SAAUC,EAAgBZ,KAC1Ba,sBAAuB,GACvBC,oBAAoB,EACpBC,UAAW,IAsDZ,IAAMC,EAAQC,YA3Cd,WAGa,IAFZC,EAEYC,UAAA3B,OAAA,QAAA4B,IAAAD,UAAA,GAAAA,UAAA,GAFOT,EACnBW,EACYF,UAAA3B,OAAA,EAAA2B,UAAA,QAAAC,EACZ,OAAQC,EAAOC,MACd,KAAKb,EAAYc,aAChB,OAAO3B,OAAA4B,EAAA,EAAA5B,CAAA,GACHsB,EADJ,CAECP,SAAUU,EAAOI,QAEnB,KAAKhB,EAAYiB,oBAChB,OAAO9B,OAAA4B,EAAA,EAAA5B,CAAA,GACHsB,EADJ,CAECL,sBAAqB,CACpBQ,EAAOI,OADa9B,OAAAC,OAAA+B,EAAA,EAAA/B,CAEjBsB,EAAML,0BAGZ,KAAKJ,EAAYmB,mBAChB,OAAOhC,OAAA4B,EAAA,EAAA5B,CAAA,GACHsB,EADJ,CAECL,sBAAuBK,EAAML,sBAAsBgB,MAAM,KAE3D,KAAKpB,EAAYqB,aAChB,OAAOlC,OAAA4B,EAAA,EAAA5B,CAAA,GACHsB,EADJ,CAECJ,oBAAoB,IAEtB,KAAKL,EAAYsB,gBAChB,OAAOnC,OAAA4B,EAAA,EAAA5B,CAAA,GACHsB,EADJ,CAECJ,oBAAoB,IAEtB,KAAKL,EAAYuB,iBAChB,OAAOpC,OAAA4B,EAAA,EAAA5B,CAAA,GACHsB,EADJ,CAECH,UAAUnB,OAAA+B,EAAA,EAAA/B,CAAKsB,EAAMH,WAAZpB,OAAA,CAAuB0B,EAAOI,UAEzC,QACC,OAAOP,KAMVe,EAAA,EAEO,SAASC,IACf,OAAO3B,EAAiBS,EAAMmB,WAAWxB,UCrG1C,SAASyB,EAAYC,GACpB,OACCC,EAAAhE,EAAAiE,cAAA,YACEF,EAAMG,OAAOC,IAAI,SAAAC,GAAK,OACtBJ,EAAAhE,EAAAiE,cAAA,QAAMI,IAAKD,EAAOE,UAAU,SAC1BF,EACAG,MAGFR,EAAMS,MAAML,IAAI,SAAAtD,GAAI,OACpBmD,EAAAhE,EAAAiE,cAAA,QAAMI,IAAKxD,EAAMyD,UAAU,QACzBzD,EACA0D,WAOeE,6MAcpBnE,QAAU,OACVC,gBACC,iJALA,OATAK,EADiDD,EAA5CC,gBACU,CACdC,KACCmD,EAAAhE,EAAAiE,cAACH,EAAD,CACCI,OAAQN,IAAqB9B,cAAc4C,OAC3CF,MAAOZ,IAAqB/B,UAAU6C,WAKlC3D,QAAQC,QAAQ,aAXOX,GC5B1BsE,EAAsB,CAC3B,mBACA,mDACA,2BACA,kBACA,qBACA,sBACA,eAGoBC,6MASpBtE,QAAU,WACVC,gBAAkB,2HATgC,IAA5CK,EAA4CD,EAA5CC,eACL,OAAO+D,EAAUE,OAChB,SAACC,EAAqBjE,GAAtB,OACCiE,EAAKC,KAAK,kBAAMnE,EAAe,CAAEC,OAAMmE,OAAO,OAC/CjE,QAAQC,QAAQ,cALiBX,GCNf4E,EACpB,SAAAA,EAAAtE,GAAuD,IAAzCuE,EAAyCvE,EAAzCuE,YAAaxD,EAA4Bf,EAA5Be,KAAMyD,EAAsBxE,EAAtBwE,aAAsB7D,OAAAK,EAAA,EAAAL,CAAAM,KAAAqD,GACtDrD,KAAKsD,YAAcA,EACnBtD,KAAKF,KAAOA,EACZE,KAAKuD,aAAeA,GCPhBC,EAAsC,GAExClD,GAAkB,EAcPkD,QCdMC,6MAsBpB/E,QAAU,SACVC,gBACC,sKAvBuD,IAAlDK,EAAkDD,EAAlDC,eAAgBF,EAAkCC,EAAlCD,KACrB,MAAgB,OAAZA,EAAK,IAAe0E,EAAa1E,EAAK,IAClCE,EAAe,CACrBC,KAAMuE,EAAa1E,EAAK,IAAIwE,YAC5BF,OAAO,IAILtE,EAAKQ,OAAS,EACVN,EAAe,CACrBC,KAAI,WAAAQ,OAAaO,KAAKtB,QAAlB,cAAAe,OAAsCX,EAAKI,KAAK,KAAhD,OAIC8C,IAAqBnC,aAAaoD,OACxC,SAACC,EAADQ,GAAA,IAAwBtD,EAAxBsD,EAAwBtD,KAAxB,OACC8C,EAAKC,KAAK,kBAAMnE,EAAe,CAAEC,KAAMmB,EAAMgD,OAAO,OACrDjE,QAAQC,QAAQ,cAlBeX,GCFbkF,6MAoDpBjF,QAAU,OACVC,gBACC,0JApDA,IAAMiF,EAAc9C,EAAMmB,WAAWtB,sBAAsB,GAE3DG,EAAM+C,SAAS,CACdzC,KAAMb,EAAYmB,qBAGfkC,GACH9C,EAAM+C,SAAS,CACdzC,KAAMb,EAAYc,aAClBE,MAAOqC,mCAK8C,IAAlD9E,EAAkDC,EAAlDD,KAAME,EAA4CD,EAA5CC,eACL8E,EAAc3E,QAAQC,QAAQ,MAEpC,GAAIN,EAAK,GAAGiF,QAAQ,OAAS,EAG5B,IAFA,IAAMC,GAASlF,EAAK,GAAGmF,MAAM,QAAU,IAAI3E,OAElC4E,EAAI,EAAGA,EAAIF,EAAOE,IAC1BlE,KAAKmE,2BAEA,CACN,IAAMP,EAAc5B,IAAqB9B,cAAckE,KACtD,SAACtE,GAAD,OAAkBA,IAAShB,EAAK,KAG7B8E,GACH9C,EAAM+C,SAAS,CACdzC,KAAMb,EAAYiB,oBAClBD,MAAOT,EAAMmB,WAAWxB,WAGzBK,EAAM+C,SAAS,CACdzC,KAAMb,EAAYc,aAClBE,MAAOqC,KAGR5E,EAAe,CAAEC,KAAI,oBAAAQ,OAAsBX,EAAK,MAQlD,OAJAuF,EAAe,CACd5D,SAAUK,EAAMmB,WAAWxB,WAGrBqD,SAjDuBrF,GAyDzB,SAAS4F,EAATX,GAAkEA,EAAxCjD,aCrD3B6D,6MACGC,SAAmB,IAE3BvD,MAAe,CACdwD,SAAS,IAAIC,MAAOC,UAAUnG,+FAGX,IAAAoG,EAAA3E,KACnBA,KAAKuE,SAAWK,OAAOC,YAAY,WAClCF,EAAKG,SAAS,CAAEN,SAAS,IAAIC,MAAOC,UAAUnG,cAC5C,oDAIHqG,OAAOG,cAAc/E,KAAKuE,2CAI1B,OAAOnC,EAAAhE,EAAAiE,cAAA,YAAOrC,KAAKgB,MAAMwD,gBAlBCQ,IAAMC,WAsBbC,6MAOpBxG,QAAU,SACVC,gBAAkB,gGAJjB,OAFAK,EADiDD,EAA5CC,gBACU,CAAEC,KAAMmD,EAAAhE,EAAAiE,cAAC8C,EAAD,QAEhBhG,QAAQC,QAAQ,aAJSX,GCzBb2G,6MAyBpB1G,QAAU,WACVC,gBACC,iIA1BuD,IAAlDG,EAAkDC,EAAlDD,KAAME,EAA4CD,EAA5CC,eACLC,EAAOH,EAAK,GAoBlB,OAjBC0E,EAAavE,IACb+C,IAAqB/B,UAAU8D,QAAQ9E,IAAS,GAEhD+C,IAAqB/B,UAAY+B,IAAqB/B,UAAUoF,OAC/D,SAAAC,GAAQ,OAAIA,IAAarG,IAG1B6B,EAAM+C,SAAS,CACdzC,KAAMb,EAAYuB,iBAClBP,MAAOtC,IAGRD,EAAe,CAAEC,KAAI,wBAAAQ,OAA0BR,MAE/CD,EAAe,CAAEC,KAAI,eAAAQ,OAAiBR,EAAjB,WAGfE,QAAQC,QAAQ,aAtBWX,GCAf8G,6MAMpB7G,QAAU,QACVC,gBACC,2JALA,OADAK,EADiDD,EAA5CC,gBACU,CAAEC,KAAM6B,EAAMmB,WAAWpB,UAAU3B,KAAKyD,MAChDxD,QAAQC,QAAQ,aAHcX,GCOjCe,EAAgD,GAElDc,GAAkB,EA0BPd,gBChCMgG,mLAEnB,OACCpD,EAAAhE,EAAAiE,cAAA,OAAKK,UAAU,mBACb1C,KAAKmC,MAAMsD,gBAAgBlD,IAAI,SAAAtD,GAAI,OACnCmD,EAAAhE,EAAAiE,cAACD,EAAAhE,EAAMsH,SAAP,CAAgBjD,IAAKxD,EAAK0G,IACxB1G,EAAKuF,QADP,IACgBpC,EAAAhE,EAAAiE,cAAA,sBANuB2C,IAAMC,WCa7BW,6MACpB5E,MAAe,CACd6E,eAAgB,GAChBC,uBAAwB,KAGjBC,QAAmC,OAEnCC,WAAa,WACpBC,EAAKF,SAAWE,EAAKF,QAAQG,WAWtBC,gBAAkB,WACzBF,EAAKnB,SACJ,SAAA9D,GACC,OACCA,EAAM8E,wBACN9E,EAAM6E,eAAevG,OAAS,EAEvB,KAGD,CACNwG,sBAAuB9E,EAAM8E,sBAAwB,IAGvD,WACC,IAAMpH,EAAUuH,EAAKjF,MAAM6E,eAC1BI,EAAKjF,MAAM8E,uBAGRpH,IACHuH,EAAKG,WAAa1H,EAAQ8F,cAMtB6B,mBAAqB,WAC5BJ,EAAKnB,SACJ,SAAA9D,GACC,OAAqC,IAAjCA,EAAM8E,sBACF,KAGD,CACNA,sBAAuB9E,EAAM8E,sBAAwB,IAGvD,YAC2C,IAAtCG,EAAKjF,MAAM8E,wBACdG,EAAKG,WAAa,IAGnB,IAAM1H,EAAUuH,EAAKjF,MAAM6E,eAC1BI,EAAKjF,MAAM8E,uBAGRpH,IACHuH,EAAKG,WAAa1H,EAAQ8F,cAMtB8B,gBAAkB,WACzB1B,OAAO2B,WAAW,WACbN,EAAKF,UACRE,EAAKF,QAAQS,eAAiB,MAE7B,MAGIC,cAAgB,SAACC,GACxB,OAAQA,EAAEjE,KACT,IAAK,UACJwD,EAAKE,kBACLF,EAAKK,kBACL,MACD,IAAK,YACJL,EAAKI,qBACLJ,EAAKK,kBACL,MACD,IAAK,MACJI,EAAEC,iBACFV,EAAKW,cACL,MACD,IAAK,QACJF,EAAEC,iBACFV,EAAKY,oBAAoBZ,EAAKG,YAC9BH,EAAK9D,MAAM2E,aAAab,EAAKG,YAC7BH,EAAKG,WAAa,OAMbS,oBAAsB,SAACtF,GAC9B0E,EAAKnB,SAAS,SAAA9D,GAAK,MAAK,CACvB6E,eAAc,CACb,CACCrB,QAASjD,EACToE,GAAIoB,MAHQtH,OAAAC,OAAA+B,EAAA,EAAA/B,CAKVsB,EAAM6E,iBAEVC,uBAAwB,QAclBc,YAAc,WACrB,GAAwB,KAApBX,EAAKG,WAAT,CAD2B,IAAAY,EAKAf,EAAKG,WAAWa,MAAM,KALtBC,EAAAxH,OAAAyH,EAAA,EAAAzH,CAAAsH,GAKpBtI,EALoBwI,EAAA,GAKRE,EALQF,EAAAvF,MAAA,GAOvB0F,EAAYD,EAAKA,EAAK9H,OAAS,GAEV,qBAAd+H,IACVA,EAAY,IAGb,IAAMC,EAAU5H,OAAA+B,EAAA,EAAA/B,CACZsC,IAAqB9B,eADTT,OAAAC,OAAA+B,EAAA,EAAA/B,CAEZsC,IAAqB/B,YACvBoF,OAAO,SAACvF,GAAD,OAA8C,IAA5BA,EAAKiE,QAAQsD,KAExC,OAAQC,EAAQhI,QACf,KAAK,EACJ,MACD,KAAK,EACJ,IAAMiI,EAAW,CAChB7I,GADgBe,OAAAC,OAAA+B,EAAA,EAAA/B,CAEb0H,EAAKzF,MAAM,EAAGyF,EAAK9H,OAAS,IAFf,CAGhBgI,EAAQ,KACPpI,KAAK,KACP+G,EAAKG,WAAamB,EAClB,MACD,QACCtB,EAAK9D,MAAMnD,eAAe,CACzBC,KAAMqI,EAAQrE,OACb,SAACC,EAAcsE,GAAf,SAAA/H,OACIyD,GADJzD,OACWkD,IADXlD,OACuB+H,6FApJ3B5C,OAAO6C,iBAAiB,QAASzH,KAAKgG,2DAItCpB,OAAO8C,oBAAoB,QAAS1H,KAAKgG,6CAwJjC,IAAArB,EAAA3E,KACR,OACCoC,EAAAhE,EAAAiE,cAAAD,EAAAhE,EAAAsH,SAAA,KACCtD,EAAAhE,EAAAiE,cAAA,SACCK,UAAU,QACVtB,KAAK,OACLuG,UAAW3H,KAAKyG,cAChBmB,IAAK,SAAAlB,GACJ/B,EAAKoB,QAAUW,EACf/B,EAAKoB,SAAWpB,EAAKoB,QAAQG,+CA3DjC,OAAOlG,KAAK+F,QAAU/F,KAAK+F,QAAQxE,MAAQ,iBAGrBA,GAClBvB,KAAK+F,UACR/F,KAAK+F,QAAQxE,MAAQA,UA5HmByD,IAAMC,WCO3C4C,GACLjD,OAAOkD,gBACLC,YACA1C,OAAO,SAAAwC,GAAK,MAAmB,UAAfA,EAAMG,OAAkB,IAC1CpD,OAAOkD,gBAAgBC,YAAY,GCGpC,SAASE,KACR,WAAAxI,OAAYqB,EAAMmB,WAAWxB,SAA7B,OAGM,IAAMkC,GAAY,OAEnBuF,8MACLlH,MAAuB,CACtByE,gBAAiB,CAChB,CAAEjB,QAAS,qCAAsCmB,GAAIoB,KACrD,CAAEvC,QAAS,2BAA4BmB,GAAIoB,KAC3C,CACCvC,QAAS,gDACTmB,GAAIoB,SAKCoB,eAA2C,KAE3CC,cAAgB,SAAC1B,GACxB,IAAM2B,EAAc3B,EAEZjE,EAAQ4F,EAAR5F,KAGC,WAARA,GACC4F,EAAWC,SAAW,CAAC,IAAK,IAAK,IAAK,KAAKvE,QAAQtB,IAAQ,KAE5DwD,EAAKsC,uBDZP3D,OAAOkD,gBAAgBU,SCcrB1H,EAAM+C,SAAS,CAAEzC,KAAMb,EAAYsB,sBAY7B4G,0BAA4B,WACnC,IAAIC,GAAU,EAEd,MAAO,CACNC,OAAQ,WACPD,GAAU,GAEX1J,eAAgB,SAACF,GAChB,OAAK4J,EAGEvJ,QAAQC,QAAQ,MAFf6G,EAAKjH,eAAeF,QAOvByJ,qBAAuB,WAC9BtC,EAAKkC,eAAeS,QAAQ,SAAAC,GAC3BA,EAAOF,WAGR1C,EAAKkC,eAAiB,MAGfW,WAAa,SAACvH,GAAkB,IAAAwH,EACRxH,EAAM0F,MAAM,KADJ+B,EAAAtJ,OAAAyH,EAAA,EAAAzH,CAAAqJ,GAChCE,EADgCD,EAAA,GAChBlK,EADgBkK,EAAArH,MAAA,GAGjCuH,EAAU1J,EAAgByJ,GAIhC,GAFAhD,EAAKjH,eAAe,CAAEC,KAAI,GAAAQ,OAAKwI,MAALxI,OAAqB8B,KAE3C2H,EAAS,CACZ,IAAMC,EAAyBlD,EAAKwC,4BACpCxC,EAAKkC,eAAeiB,KAAKD,GAEzBrI,EAAM+C,SAAS,CAAEzC,KAAMb,EAAYqB,eAEnCsH,EACEG,IAAI,CACJvK,OACAE,eAAgBmK,EAAuBnK,iBAEvCmE,KAAK,WACLrC,EAAM+C,SAAS,CAAEzC,KAAMb,EAAYsB,oBAEnCyH,MAAMC,QAAQC,YAEhBvD,EAAKjH,eAAe,CAAEC,KAAI,uBAAAQ,OAAyBwJ,QAI7CjK,eAAiB,SAAAD,GAGe,IAFvCE,EAEuCF,EAFvCE,KACAmE,EACuCrE,EADvCqE,MAEIqG,EAAgB,KAEpB,GAAIrG,GAAyB,kBAATnE,EACnB,KAAM,6BAeP,OAdWmE,GAAyB,kBAATnE,IAC1BwK,EDxGY,SAAarJ,GAC3B,IAAMsJ,EAAY,IAAIC,yBAAyBvJ,GAS/C,OAPAsJ,EAAUE,KAAO,GACjBF,EAAUG,MAAQ,GAElBH,EAAU7B,MAAQA,GAElBjD,OAAOkD,gBAAgB1E,MAAMsG,GAEtB,IAAIvK,QAAQ,SAAAC,GAClBsK,EAAUI,MAAQ,WACjBlF,OAAO2B,WAAWnH,EAAS,QC4FX2K,CAAI9K,IAGrBgH,EAAKnB,SAAS,SAAA9D,GAAK,MAAK,CACvByE,gBAAgB/F,OAAA+B,EAAA,EAAA/B,CACZsB,EAAMyE,iBADKhG,OAAA,CAEd,CACC+E,QAASvF,EACT0G,GAAIoB,UAKA0C,GAAgCtK,QAAQC,QAAQ,0FAhFvDwF,OAAO6C,iBAAiB,UAAWzH,KAAKoI,8DAIxCxD,OAAO8C,oBAAoB,UAAW1H,KAAKoI,gDA+EnC,IACA3C,EAAoBzF,KAAKgB,MAAzByE,gBACA7E,EAAuBZ,KAAKmC,MAA5BvB,mBAER,OACCwB,EAAAhE,EAAAiE,cAAA,OAAKK,UAAU,YACdN,EAAAhE,EAAAiE,cAAC2H,EAAD,CAAgBvE,gBAAiBA,IAEjCrD,EAAAhE,EAAAiE,cAAA,QACCK,UAAS,cAAAjD,OACRmB,EAAqB,SAAW,KAGjCwB,EAAAhE,EAAAiE,cAAA,QAAMK,UAAU,gBAAgBuF,MAEhC7F,EAAAhE,EAAAiE,cAAC4H,EAAD,CACCjL,eAAgBgB,KAAKhB,eACrB8H,aAAc9G,KAAK8I,sBAlIF9D,IAAMC,WA8IdiF,mBAJf,SAAyBlJ,GACxB,MAAO,CAAEJ,mBAAoBI,EAAMJ,qBAGrBsJ,CAAyBhC,IC9KlCiC,GAAwB,iBAETC,eACpB,SAAAA,EAAYjI,GAAW,IAAA8D,EAAA,OAAAvG,OAAAK,EAAA,EAAAL,CAAAM,KAAAoK,GACtBnE,EAAAvG,OAAA2K,EAAA,EAAA3K,CAAAM,KAAAN,OAAA4K,EAAA,EAAA5K,CAAA0K,GAAAG,KAAAvK,KAAMmC,IhBMH7B,IAIJA,GAAS,EAETkK,EAAU5B,QAAQ,SAAAnI,GACjBJ,EAAiBI,EAASX,MAAQ,IAAIF,EAASa,KAGhDgK,EAAU7B,QAAQ,SAAA8B,GACjBrK,EAAiBqK,EAAa,IAAIxK,cAAckJ,KAAKsB,EAAa,IAElErK,EAAiBqK,EAAa,IAAIxK,cAAckJ,KAAKsB,EAAa,MAGnE9H,EAAMgG,QAAQ,SAAA3J,GACb,GAAmD,qBAAxCoB,EAAiBpB,EAAKsE,cAChC,QAAA9D,OAASR,EAAKa,KAAd,kBAAAL,OACCR,EAAKsE,aADN,0BAKDlD,EAAiBpB,EAAKsE,cAActD,UAAUmJ,KAAKnK,EAAKa,SWzBrDQ,IAIJA,GAAS,EAES,CACjB,IAAIzB,EACJ,IAAIQ,EACJ,IAAIwD,EACJ,IAAIG,EACJ,IAAIW,EACJ,IAAIF,EACJ,IAAIyB,EACJ,IAAIE,EACJ,IAAIG,GAGKqD,QAAQ,SAAAM,GACjB1J,EAAgB0J,EAAQxK,SAAWwK,KN3BhC5I,IAIJA,GAAS,EAETsC,EAAMgG,QAAQ,SAAA3J,GACbuE,EAAavE,EAAKa,MAAQ,IAAIuD,EAAKpE,MWGnCoF,EAAe,CAAE5D,SAAU0J,KAE3BrJ,EAAM+C,SAAS,CACdzC,KAAMb,EAAYc,aAClBE,MAAO4I,KAXclE,wEAgBtB,OACC7D,EAAAhE,EAAAiE,cAAA,OAAKK,UAAU,QACdN,EAAAhE,EAAAiE,cAACsI,GAAD,cAnB6B3F,IAAMC,WCFvC2F,IAASC,OACRzI,EAAAhE,EAAAiE,cAACyI,EAAA,EAAD,CAAUhK,MAAOA,GAChBsB,EAAAhE,EAAAiE,cAAC0I,GAAD,OAEDC,SAASC,eAAe","file":"static/js/main.4e633953.chunk.js","sourcesContent":["// simplest UUID implementation\n// https://gist.github.com/jed/982883\n\nexport default function b(a) {\n\treturn a\n\t\t? (a ^ ((Math.random() * 16) >> (a / 4))).toString(16)\n\t\t: ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, b);\n}\n","import { IConsoleWriteArgs } from '../components/Terminal';\n\nexport interface RunParams {\n\targs: string[];\n\twriteToConsole: (arg1: IConsoleWriteArgs) => Promise<null>;\n}\n\nexport default class BaseUtility {\n\trun(_params: RunParams): Promise<null> {\n\t\tthrow 'not implemented';\n\t}\n\n\tcommand: string = '';\n\thelpDescription: string = '';\n}\n","import BaseUtility, { RunParams } from './BaseUtility';\n\nexport default class Echo extends BaseUtility {\n\trun({ args, writeToConsole }: RunParams): Promise<null> {\n\t\twriteToConsole({ item: args.join(' ') });\n\t\treturn Promise.resolve(null);\n\t}\n\n\tcommand = 'echo';\n\thelpDescription =\n\t\t'Use echo to say something out loud. Example:\\n\\necho Is anyone there?';\n}\n","import BaseUtility, { RunParams } from './BaseUtility';\nimport UtilityManifest from './UtilityManifest';\n\nexport default class Help extends BaseUtility {\n\trun({ writeToConsole, args }: RunParams): Promise<null> {\n\t\tif (args.length >= 1) {\n\t\t\tconst util = UtilityManifest[args[0]];\n\t\t\tconst description = util\n\t\t\t\t? util.helpDescription\n\t\t\t\t: `I don't know much about ${args.join(' ')}.`;\n\n\t\t\twriteToConsole({ item: description });\n\t\t} else {\n\t\t\twriteToConsole({\n\t\t\t\titem: `The following utilities are available: ${Object.keys(\n\t\t\t\t\tUtilityManifest\n\t\t\t\t).join(\n\t\t\t\t\t', '\n\t\t\t\t)}.\\n\\nFor help with any particular utility, write \"help <utility name>\".`\n\t\t\t});\n\t\t}\n\n\t\treturn Promise.resolve(null);\n\t}\n\n\tcommand = 'help';\n\thelpDescription = 'Use help to make sense of the world.';\n}\n","export interface Description {\n\ttext: string;\n\ttimer?: number;\n}\n\ninterface Args {\n\tslug: string;\n\tdescriptions: Description[];\n}\n\nexport default class Location {\n\tconstructor({ descriptions, slug }: Args) {\n\t\tthis.descriptions = descriptions;\n\t\tthis.slug = slug;\n\t}\n\n\tdescriptions: Description[];\n\tslug: string;\n\titemSlugs: string[] = [];\n\tneighborSlugs: string[] = [];\n}\n","import Location from './Location';\n\nimport locations from '../data/locations.json';\nimport neighbors from '../data/neighbors.json';\nimport items from '../data/items.json';\n\nexport const loading = new Location({\n\tslug: 'loading',\n\tdescriptions: [{ text: 'loading' }]\n});\n\nconst LocationManifest: { [s: string]: Location } = {\n\tloading\n};\n\nlet hasRun: boolean = false;\n\nexport function initializeLocations() {\n\tif (hasRun) {\n\t\treturn;\n\t}\n\n\thasRun = true;\n\n\tlocations.forEach(location => {\n\t\tLocationManifest[location.slug] = new Location(location);\n\t});\n\n\tneighbors.forEach(neighborPair => {\n\t\tLocationManifest[neighborPair[0]].neighborSlugs.push(neighborPair[1]);\n\n\t\tLocationManifest[neighborPair[1]].neighborSlugs.push(neighborPair[0]);\n\t});\n\n\titems.forEach(item => {\n\t\tif (typeof LocationManifest[item.locationSlug] === 'undefined') {\n\t\t\tthrow `${item.slug} has location ${\n\t\t\t\titem.locationSlug\n\t\t\t}, which does not exist`;\n\t\t}\n\n\t\tLocationManifest[item.locationSlug].itemSlugs.push(item.slug);\n\t});\n}\n\nexport default LocationManifest;\n","import { createStore } from 'redux';\nimport Location from './nouns/Location';\nimport LocationManifest, {\n\tloading as loadingLocation\n} from './nouns/LocationManifest';\n\nexport interface RootState {\n\tlocation: string;\n\tpreviousLocationStack: string[];\n\tconsoleInteractive: boolean;\n\tinventory: string[];\n}\n\nexport enum ActionTypes {\n\tSET_LOCATION = 'SET_LOCATION',\n\tPOP_LOCATION_STACK = 'POP_LOCATION_STACK',\n\tPUSH_LOCATION_STACK = 'PUSH_LOCATION_STACK',\n\tLOCK_CONSOLE = 'LOCK_CONSOLE',\n\tRELEASE_CONSOLE = 'RELEASE_CONSOLE',\n\tADD_TO_INVENTORY = 'ADD_TO_INVENTORY'\n}\n\ninterface SetLocation {\n\ttype: ActionTypes.SET_LOCATION;\n\tvalue: string;\n}\n\ninterface PopLocationStack {\n\ttype: ActionTypes.POP_LOCATION_STACK;\n}\n\ninterface PushLocationStack {\n\ttype: ActionTypes.PUSH_LOCATION_STACK;\n\tvalue: string;\n}\n\ninterface LockConsole {\n\ttype: ActionTypes.LOCK_CONSOLE;\n}\n\ninterface ReleaseConsole {\n\ttype: ActionTypes.RELEASE_CONSOLE;\n}\n\ninterface AddToInventory {\n\ttype: ActionTypes.ADD_TO_INVENTORY;\n\tvalue: string;\n}\n\nconst initialState: RootState = {\n\tlocation: loadingLocation.slug,\n\tpreviousLocationStack: [],\n\tconsoleInteractive: true,\n\tinventory: []\n};\n\ntype CombinedAction =\n\t| SetLocation\n\t| PopLocationStack\n\t| PushLocationStack\n\t| LockConsole\n\t| ReleaseConsole\n\t| AddToInventory;\n\nfunction reducer(\n\tstate: RootState = initialState,\n\taction: CombinedAction\n): RootState {\n\tswitch (action.type) {\n\t\tcase ActionTypes.SET_LOCATION:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tlocation: action.value\n\t\t\t};\n\t\tcase ActionTypes.PUSH_LOCATION_STACK:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tpreviousLocationStack: [\n\t\t\t\t\taction.value,\n\t\t\t\t\t...state.previousLocationStack\n\t\t\t\t]\n\t\t\t};\n\t\tcase ActionTypes.POP_LOCATION_STACK:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tpreviousLocationStack: state.previousLocationStack.slice(1)\n\t\t\t};\n\t\tcase ActionTypes.LOCK_CONSOLE:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tconsoleInteractive: false\n\t\t\t};\n\t\tcase ActionTypes.RELEASE_CONSOLE:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tconsoleInteractive: true\n\t\t\t};\n\t\tcase ActionTypes.ADD_TO_INVENTORY:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tinventory: [...state.inventory, action.value]\n\t\t\t};\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\n\nconst store = createStore(reducer);\n\nexport default store;\n\nexport function getCurrentLocation(): Location {\n\treturn LocationManifest[store.getState().location];\n}\n","import React from 'react';\n\nimport BaseUtility, { RunParams } from './BaseUtility';\nimport { getCurrentLocation } from '../store';\nimport { TAB_WIDTH } from '../components/Terminal';\n\ninterface Props {\n\titems: string[];\n\tplaces: string[];\n}\n\nfunction LsComponent(props: Props) {\n\treturn (\n\t\t<span>\n\t\t\t{props.places.map(place => (\n\t\t\t\t<span key={place} className=\"place\">\n\t\t\t\t\t{place}\n\t\t\t\t\t{TAB_WIDTH}\n\t\t\t\t</span>\n\t\t\t))}\n\t\t\t{props.items.map(item => (\n\t\t\t\t<span key={item} className=\"item\">\n\t\t\t\t\t{item}\n\t\t\t\t\t{TAB_WIDTH}\n\t\t\t\t</span>\n\t\t\t))}\n\t\t</span>\n\t);\n}\n\nexport default class Ls extends BaseUtility {\n\trun({ writeToConsole }: RunParams): Promise<null> {\n\t\twriteToConsole({\n\t\t\titem: (\n\t\t\t\t<LsComponent\n\t\t\t\t\tplaces={getCurrentLocation().neighborSlugs.sort()}\n\t\t\t\t\titems={getCurrentLocation().itemSlugs.sort()}\n\t\t\t\t/>\n\t\t\t)\n\t\t});\n\n\t\treturn Promise.resolve(null);\n\t}\n\n\tcommand = 'ls';\n\thelpDescription =\n\t\t'ls lists the locations and objects you can reach from where you are now.';\n}\n","import BaseUtility, { RunParams } from './BaseUtility';\n\nconst responses: string[] = [\n\t\"I don't remember\",\n\t'But I am glad you asked. I am glad you are here.',\n\t\"I don't know who you are\",\n\t'You are an echo',\n\t'You were a mistake',\n\t'You are a dog lover',\n\t'Or you were'\n];\n\nexport default class WhoAmI extends BaseUtility {\n\trun({ writeToConsole }: RunParams): Promise<null> {\n\t\treturn responses.reduce(\n\t\t\t(memo: Promise<null>, item: string): Promise<null> =>\n\t\t\t\tmemo.then(() => writeToConsole({ item, speak: true })),\n\t\t\tPromise.resolve(null)\n\t\t);\n\t}\n\n\tcommand = 'whoami';\n\thelpDescription = 'Ask a difficult question. Get a difficult response';\n}\n","interface Args {\n\tslug: string;\n\tlocationSlug: string;\n\tdescription: string;\n}\n\nexport default class Item {\n\tconstructor({ description, slug, locationSlug }: Args) {\n\t\tthis.description = description;\n\t\tthis.slug = slug;\n\t\tthis.locationSlug = locationSlug;\n\t}\n\n\tdescription: string;\n\tslug: string;\n\tlocationSlug: string;\n}\n","import Item from './Item';\nimport items from '../data/items.json';\n\nconst ItemManifest: { [s: string]: Item } = {};\n\nlet hasRun: boolean = false;\n\nexport function initializeItems() {\n\tif (hasRun) {\n\t\treturn;\n\t}\n\n\thasRun = true;\n\n\titems.forEach(item => {\n\t\tItemManifest[item.slug] = new Item(item);\n\t});\n}\n\nexport default ItemManifest;\n","import BaseUtility, { RunParams } from './BaseUtility';\nimport { getCurrentLocation } from '../store';\nimport ItemManifest from '../nouns/ItemManifest';\nimport { Description } from '../nouns/Location';\n\nexport default class Look extends BaseUtility {\n\trun({ writeToConsole, args }: RunParams): Promise<null> {\n\t\tif (args[0] === 'at' && ItemManifest[args[1]]) {\n\t\t\treturn writeToConsole({\n\t\t\t\titem: ItemManifest[args[1]].description,\n\t\t\t\tspeak: true\n\t\t\t});\n\t\t}\n\n\t\tif (args.length > 0) {\n\t\t\treturn writeToConsole({\n\t\t\t\titem: `invalid ${this.command} argument ${args.join(' ')}.`\n\t\t\t});\n\t\t}\n\n\t\treturn getCurrentLocation().descriptions.reduce(\n\t\t\t(memo: Promise<null>, { text }: Description): Promise<null> =>\n\t\t\t\tmemo.then(() => writeToConsole({ item: text, speak: true })),\n\t\t\tPromise.resolve(null)\n\t\t);\n\t}\n\n\tcommand = 'look';\n\thelpDescription =\n\t\t'Use look to take some time, to see where you are. Some things take longer to see than others.';\n}\n","import BaseUtility, { RunParams } from './BaseUtility';\nimport store, { ActionTypes, getCurrentLocation } from '../store';\n\nexport default class Cd extends BaseUtility {\n\tprivate goToPreviousLocation() {\n\t\tconst newLocation = store.getState().previousLocationStack[0];\n\n\t\tstore.dispatch({\n\t\t\ttype: ActionTypes.POP_LOCATION_STACK\n\t\t});\n\n\t\tif (newLocation) {\n\t\t\tstore.dispatch({\n\t\t\t\ttype: ActionTypes.SET_LOCATION,\n\t\t\t\tvalue: newLocation\n\t\t\t});\n\t\t}\n\t}\n\n\trun({ args, writeToConsole }: RunParams): Promise<null> {\n\t\tconst nullPromise = Promise.resolve(null);\n\n\t\tif (args[0].indexOf('..') >= 0) {\n\t\t\tconst count = (args[0].match(/../g) || []).length;\n\n\t\t\tfor (let i = 0; i < count; i++) {\n\t\t\t\tthis.goToPreviousLocation();\n\t\t\t}\n\t\t} else {\n\t\t\tconst newLocation = getCurrentLocation().neighborSlugs.find(\n\t\t\t\t(slug: string) => slug === args[0]\n\t\t\t);\n\n\t\t\tif (newLocation) {\n\t\t\t\tstore.dispatch({\n\t\t\t\t\ttype: ActionTypes.PUSH_LOCATION_STACK,\n\t\t\t\t\tvalue: store.getState().location\n\t\t\t\t});\n\n\t\t\t\tstore.dispatch({\n\t\t\t\t\ttype: ActionTypes.SET_LOCATION,\n\t\t\t\t\tvalue: newLocation\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\twriteToConsole({ item: `invalid location ${args[0]}` });\n\t\t\t}\n\t\t}\n\n\t\tsetUrlLocation({\n\t\t\tlocation: store.getState().location\n\t\t});\n\n\t\treturn nullPromise;\n\t}\n\n\tcommand = 'cd';\n\thelpDescription =\n\t\t'Use cd to move to a new location. For example:\\n\\ncd a_cold_cabin';\n}\n\nexport function setUrlLocation({ location }: { location: string }): void {\n\t// const currentUrl = window.location.href;\n\t// const newUrl =\n\t// \tcurrentUrl.substring(0, currentUrl.lastIndexOf('/') + 1) + location;\n\t// window.history.pushState({ path: newUrl }, '', newUrl);\n}\n","import React from 'react';\nimport BaseUtility, { RunParams } from './BaseUtility';\n\ninterface State {\n\tcontent: string;\n}\n\nclass TimeComponent extends React.Component<{}, State> {\n\tprivate interval: number = 0;\n\n\tstate: State = {\n\t\tcontent: new Date().getTime().toString()\n\t};\n\n\tcomponentDidMount() {\n\t\tthis.interval = window.setInterval(() => {\n\t\t\tthis.setState({ content: new Date().getTime().toString() });\n\t\t}, 1000);\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.clearInterval(this.interval);\n\t}\n\n\trender() {\n\t\treturn <span>{this.state.content}</span>;\n\t}\n}\n\nexport default class Time extends BaseUtility {\n\trun({ writeToConsole }: RunParams): Promise<null> {\n\t\twriteToConsole({ item: <TimeComponent /> });\n\n\t\treturn Promise.resolve(null);\n\t}\n\n\tcommand = 'time';\n\thelpDescription = 'time tells you the time';\n}\n","import BaseUtility, { RunParams } from './BaseUtility';\nimport store, { ActionTypes, getCurrentLocation } from '../store';\nimport ItemManifest from '../nouns/ItemManifest';\n\nexport default class Pickup extends BaseUtility {\n\trun({ args, writeToConsole }: RunParams): Promise<null> {\n\t\tconst item = args[0];\n\n\t\tif (\n\t\t\tItemManifest[item] &&\n\t\t\tgetCurrentLocation().itemSlugs.indexOf(item) > -1\n\t\t) {\n\t\t\tgetCurrentLocation().itemSlugs = getCurrentLocation().itemSlugs.filter(\n\t\t\t\titemSlug => itemSlug !== item\n\t\t\t);\n\n\t\t\tstore.dispatch({\n\t\t\t\ttype: ActionTypes.ADD_TO_INVENTORY,\n\t\t\t\tvalue: item\n\t\t\t});\n\n\t\t\twriteToConsole({ item: `I have picked up the ${item}` });\n\t\t} else {\n\t\t\twriteToConsole({ item: `There is no ${item} here` });\n\t\t}\n\n\t\treturn Promise.resolve(null);\n\t}\n\n\tcommand = 'pickup';\n\thelpDescription =\n\t\t'pickup will allow you to add an object to your inventory';\n}\n","import BaseUtility, { RunParams } from './BaseUtility';\nimport store from '../store';\nimport { TAB_WIDTH } from '../components/Terminal';\n\nexport default class Inventory extends BaseUtility {\n\trun({ writeToConsole }: RunParams): Promise<null> {\n\t\twriteToConsole({ item: store.getState().inventory.join(TAB_WIDTH) });\n\t\treturn Promise.resolve(null);\n\t}\n\n\tcommand = 'inv';\n\thelpDescription =\n\t\t'List all the items currently in your inventory. To use an item, write \"use <item>\"';\n}\n","import Echo from './Echo';\nimport Help from './Help';\nimport BaseUtility from './BaseUtility';\nimport Ls from './Ls';\nimport WhoAmI from './WhoAmI';\nimport Look from './Look';\nimport Cd from './Cd';\nimport Time from './Time';\nimport Pickup from './Pickup';\nimport Inventory from './Inventory';\n\nconst UtilityManifest: { [s: string]: BaseUtility } = {};\n\nlet hasRun: boolean = false;\n\nexport function initializeUtilities() {\n\tif (hasRun) {\n\t\treturn;\n\t}\n\n\thasRun = true;\n\n\tconst utilities = [\n\t\tnew Echo(),\n\t\tnew Help(),\n\t\tnew Ls(),\n\t\tnew WhoAmI(),\n\t\tnew Cd(),\n\t\tnew Look(),\n\t\tnew Time(),\n\t\tnew Pickup(),\n\t\tnew Inventory()\n\t];\n\n\tutilities.forEach(utility => {\n\t\tUtilityManifest[utility.command] = utility;\n\t});\n}\n\nexport default UtilityManifest;\n","import React from 'react';\nimport { HistoryItem } from './Terminal';\n\ninterface Props {\n\tterminalHistory: HistoryItem[];\n}\n\nexport default class TerminalBuffer extends React.Component<Props, {}> {\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"terminal-buffer\">\n\t\t\t\t{this.props.terminalHistory.map(item => (\n\t\t\t\t\t<React.Fragment key={item.id}>\n\t\t\t\t\t\t{item.content} <br />\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React from 'react';\nimport { getCurrentLocation } from '../store';\nimport { TAB_WIDTH, IConsoleWriteArgs } from './Terminal';\nimport uuid from '../utils/uuid';\n\ninterface CommandItem {\n\tcontent: string;\n\tid: string;\n}\n\ninterface Props {\n\twriteToConsole: (arg: IConsoleWriteArgs) => void;\n\thandleSubmit: (arg: string) => void;\n}\n\ninterface State {\n\tcommandHistory: CommandItem[];\n\tcurrentPlaceInHistory: number;\n}\n\nexport default class TerminalInput extends React.Component<Props, State> {\n\tstate: State = {\n\t\tcommandHistory: [],\n\t\tcurrentPlaceInHistory: -1\n\t};\n\n\tprivate inputEl: HTMLInputElement | null = null;\n\n\tprivate focusInput = () => {\n\t\tthis.inputEl && this.inputEl.focus();\n\t};\n\n\tcomponentDidMount() {\n\t\twindow.addEventListener('click', this.focusInput);\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('click', this.focusInput);\n\t}\n\n\tprivate goBackInHistory = () => {\n\t\tthis.setState(\n\t\t\tstate => {\n\t\t\t\tif (\n\t\t\t\t\tstate.currentPlaceInHistory ===\n\t\t\t\t\tstate.commandHistory.length - 1\n\t\t\t\t) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tcurrentPlaceInHistory: state.currentPlaceInHistory + 1\n\t\t\t\t};\n\t\t\t},\n\t\t\t() => {\n\t\t\t\tconst command = this.state.commandHistory[\n\t\t\t\t\tthis.state.currentPlaceInHistory\n\t\t\t\t];\n\n\t\t\t\tif (command) {\n\t\t\t\t\tthis.inputValue = command.content;\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t};\n\n\tprivate goForwardInHistory = () => {\n\t\tthis.setState(\n\t\t\tstate => {\n\t\t\t\tif (state.currentPlaceInHistory === -1) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tcurrentPlaceInHistory: state.currentPlaceInHistory - 1\n\t\t\t\t};\n\t\t\t},\n\t\t\t() => {\n\t\t\t\tif (this.state.currentPlaceInHistory === -1) {\n\t\t\t\t\tthis.inputValue = '';\n\t\t\t\t}\n\n\t\t\t\tconst command = this.state.commandHistory[\n\t\t\t\t\tthis.state.currentPlaceInHistory\n\t\t\t\t];\n\n\t\t\t\tif (command) {\n\t\t\t\t\tthis.inputValue = command.content;\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t};\n\n\tprivate moveCursorToEnd = () => {\n\t\twindow.setTimeout(() => {\n\t\t\tif (this.inputEl) {\n\t\t\t\tthis.inputEl.selectionStart = 1000;\n\t\t\t}\n\t\t}, 0);\n\t};\n\n\tprivate handleKeyDown = (e: React.KeyboardEvent<HTMLDivElement>) => {\n\t\tswitch (e.key) {\n\t\t\tcase 'ArrowUp':\n\t\t\t\tthis.goBackInHistory();\n\t\t\t\tthis.moveCursorToEnd();\n\t\t\t\tbreak;\n\t\t\tcase 'ArrowDown':\n\t\t\t\tthis.goForwardInHistory();\n\t\t\t\tthis.moveCursorToEnd();\n\t\t\t\tbreak;\n\t\t\tcase 'Tab':\n\t\t\t\te.preventDefault();\n\t\t\t\tthis.tabComplete();\n\t\t\t\tbreak;\n\t\t\tcase 'Enter':\n\t\t\t\te.preventDefault();\n\t\t\t\tthis.addToCommandHistory(this.inputValue);\n\t\t\t\tthis.props.handleSubmit(this.inputValue);\n\t\t\t\tthis.inputValue = '';\n\n\t\t\tdefault:\n\t\t}\n\t};\n\n\tprivate addToCommandHistory = (value: string) => {\n\t\tthis.setState(state => ({\n\t\t\tcommandHistory: [\n\t\t\t\t{\n\t\t\t\t\tcontent: value,\n\t\t\t\t\tid: uuid()\n\t\t\t\t},\n\t\t\t\t...state.commandHistory\n\t\t\t],\n\t\t\tcurrentPlaceInHistory: -1\n\t\t}));\n\t};\n\n\tprivate get inputValue(): string {\n\t\treturn this.inputEl ? this.inputEl.value : '';\n\t}\n\n\tprivate set inputValue(value: string) {\n\t\tif (this.inputEl) {\n\t\t\tthis.inputEl.value = value;\n\t\t}\n\t}\n\n\tprivate tabComplete = () => {\n\t\tif (this.inputValue === '') {\n\t\t\treturn;\n\t\t}\n\n\t\tconst [command, ...rest] = this.inputValue.split(' ');\n\n\t\tlet lastValue = rest[rest.length - 1];\n\n\t\tif (typeof lastValue === 'undefined') {\n\t\t\tlastValue = '';\n\t\t}\n\n\t\tconst options = [\n\t\t\t...getCurrentLocation().neighborSlugs,\n\t\t\t...getCurrentLocation().itemSlugs\n\t\t].filter((slug: string) => slug.indexOf(lastValue) === 0);\n\n\t\tswitch (options.length) {\n\t\t\tcase 0:\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\tconst newValue = [\n\t\t\t\t\tcommand,\n\t\t\t\t\t...rest.slice(0, rest.length - 1),\n\t\t\t\t\toptions[0]\n\t\t\t\t].join(' ');\n\t\t\t\tthis.inputValue = newValue;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.props.writeToConsole({\n\t\t\t\t\titem: options.reduce(\n\t\t\t\t\t\t(memo: string, option: string) =>\n\t\t\t\t\t\t\t`${memo}${TAB_WIDTH}${option}`\n\t\t\t\t\t)\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t}\n\t\treturn;\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<input\n\t\t\t\t\tclassName=\"input\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tonKeyDown={this.handleKeyDown}\n\t\t\t\t\tref={e => {\n\t\t\t\t\t\tthis.inputEl = e;\n\t\t\t\t\t\tthis.inputEl && this.inputEl.focus();\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</>\n\t\t);\n\t}\n}\n","// // karen, moira, tessa, Ting-Ting\n\n// const voices = window.speechSynthesis\n// \t.getVoices()\n// \t.filter(voice => voice.name === 'Ting-Ting');\n\n// voices.reduce((memo, voice): Promise<any> => {\n// \treturn memo.then(() => {\n// \t\tconst utterance = new SpeechSynthesisUtterance(\n// \t\t\t'this is a test statement. look at the fog. look how it is sad.'\n// \t\t);\n// \t\tutterance.voice = voice;\n// \t\tutterance.rate = 0.8;\n// \t\tutterance.pitch = 0.6;\n\n// \t\tconsole.log(voice.name);\n\n// \t\twindow.speechSynthesis.speak(utterance);\n\n// \t\treturn new Promise(resolve => {\n// \t\t\tutterance.onend = () => {\n// \t\t\t\tresolve();\n// \t\t\t};\n// \t\t});\n// \t});\n// }, Promise.resolve(null));\n\nconst voice =\n\twindow.speechSynthesis\n\t\t.getVoices()\n\t\t.filter(voice => voice.name === 'Tessa')[0] ||\n\twindow.speechSynthesis.getVoices()[0];\n\nexport default function say(text: string): Promise<null> {\n\tconst utterance = new SpeechSynthesisUtterance(text);\n\n\tutterance.rate = 0.9;\n\tutterance.pitch = 0.8;\n\n\tutterance.voice = voice;\n\n\twindow.speechSynthesis.speak(utterance);\n\n\treturn new Promise(resolve => {\n\t\tutterance.onend = () => {\n\t\t\twindow.setTimeout(resolve, 250);\n\t\t};\n\t});\n}\n\nexport function cancelSpeech(): void {\n\twindow.speechSynthesis.cancel();\n}\n","import React from 'react';\nimport uuid from '../utils/uuid';\nimport UtilityManifest from '../utilities/UtilityManifest';\nimport store, { ActionTypes, RootState } from '../store';\nimport { connect } from 'react-redux';\nimport TerminalBuffer from './TerminalBuffer';\nimport TerminalInput from './TerminalInput';\nimport say, { cancelSpeech } from '../utils/SpeechUtilities';\n\nexport type HistoryItemContent = string | JSX.Element;\n\nexport interface HistoryItem {\n\tcontent: string | JSX.Element;\n\tid: string;\n}\n\ninterface TerminalState {\n\tterminalHistory: HistoryItem[];\n}\n\ninterface TerminalProps {\n\tconsoleInteractive: boolean;\n}\n\nexport type IConsoleWriteArgs = {\n\titem: HistoryItemContent;\n\tspeak?: boolean;\n};\n\ninterface RevocableConsoleWriter {\n\trevoke: () => void;\n\twriteToConsole: (arg1: IConsoleWriteArgs) => Promise<null>;\n}\n\nfunction inputPrompt(): string {\n\treturn `~/${store.getState().location} > `;\n}\n\nexport const TAB_WIDTH = '    ';\n\nclass Terminal extends React.Component<TerminalProps, TerminalState> {\n\tstate: TerminalState = {\n\t\tterminalHistory: [\n\t\t\t{ content: 'you are in a cold and quiet forest', id: uuid() },\n\t\t\t{ content: 'rain has recently fallen', id: uuid() },\n\t\t\t{\n\t\t\t\tcontent: 'type \"help\", then press enter, to get started',\n\t\t\t\tid: uuid()\n\t\t\t}\n\t\t]\n\t};\n\n\tprivate consoleWriters: RevocableConsoleWriter[] = [];\n\n\tprivate handleKeydown = (e: Event) => {\n\t\tconst typedEvent = (e as any) as React.KeyboardEvent;\n\n\t\tconst { key } = typedEvent;\n\n\t\tif (\n\t\t\tkey === 'Escape' ||\n\t\t\t(typedEvent.ctrlKey && ['c', 'C', 'd', 'D'].indexOf(key) >= 0)\n\t\t) {\n\t\t\tthis.revokeConsoleWriters();\n\t\t\tcancelSpeech();\n\t\t\tstore.dispatch({ type: ActionTypes.RELEASE_CONSOLE });\n\t\t}\n\t};\n\n\tcomponentDidMount() {\n\t\twindow.addEventListener('keydown', this.handleKeydown);\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('keydown', this.handleKeydown);\n\t}\n\n\tprivate getRevocableConsoleWriter = (): RevocableConsoleWriter => {\n\t\tlet revoked = false;\n\n\t\treturn {\n\t\t\trevoke: () => {\n\t\t\t\trevoked = true;\n\t\t\t},\n\t\t\twriteToConsole: (args: IConsoleWriteArgs) => {\n\t\t\t\tif (!revoked) {\n\t\t\t\t\treturn this.writeToConsole(args);\n\t\t\t\t}\n\t\t\t\treturn Promise.resolve(null);\n\t\t\t}\n\t\t};\n\t};\n\n\tprivate revokeConsoleWriters = (): void => {\n\t\tthis.consoleWriters.forEach(writer => {\n\t\t\twriter.revoke();\n\t\t});\n\n\t\tthis.consoleWriters = [];\n\t};\n\n\tprivate runCommand = (value: string) => {\n\t\tconst [utilityName, ...args] = value.split(' ');\n\n\t\tconst utility = UtilityManifest[utilityName];\n\n\t\tthis.writeToConsole({ item: `${inputPrompt()}${value}` });\n\n\t\tif (utility) {\n\t\t\tconst revocableConsoleWriter = this.getRevocableConsoleWriter();\n\t\t\tthis.consoleWriters.push(revocableConsoleWriter);\n\n\t\t\tstore.dispatch({ type: ActionTypes.LOCK_CONSOLE });\n\n\t\t\tutility\n\t\t\t\t.run({\n\t\t\t\t\targs,\n\t\t\t\t\twriteToConsole: revocableConsoleWriter.writeToConsole\n\t\t\t\t})\n\t\t\t\t.then(() => {\n\t\t\t\t\tstore.dispatch({ type: ActionTypes.RELEASE_CONSOLE });\n\t\t\t\t})\n\t\t\t\t.catch(console.error);\n\t\t} else {\n\t\t\tthis.writeToConsole({ item: `I don't know how to ${utilityName}` });\n\t\t}\n\t};\n\n\tprivate writeToConsole = ({\n\t\titem,\n\t\tspeak\n\t}: IConsoleWriteArgs): Promise<null> => {\n\t\tlet speechPromise = null;\n\n\t\tif (speak && typeof item !== 'string') {\n\t\t\tthrow 'cannot \"speak\" a component';\n\t\t} else if (speak && typeof item === 'string') {\n\t\t\tspeechPromise = say(item);\n\t\t}\n\n\t\tthis.setState(state => ({\n\t\t\tterminalHistory: [\n\t\t\t\t...state.terminalHistory,\n\t\t\t\t{\n\t\t\t\t\tcontent: item,\n\t\t\t\t\tid: uuid()\n\t\t\t\t}\n\t\t\t]\n\t\t}));\n\n\t\treturn speechPromise ? speechPromise : Promise.resolve(null);\n\t};\n\n\trender() {\n\t\tconst { terminalHistory } = this.state;\n\t\tconst { consoleInteractive } = this.props;\n\n\t\treturn (\n\t\t\t<div className=\"terminal\">\n\t\t\t\t<TerminalBuffer terminalHistory={terminalHistory} />\n\n\t\t\t\t<form\n\t\t\t\t\tclassName={`input-form ${\n\t\t\t\t\t\tconsoleInteractive ? 'active' : ''\n\t\t\t\t\t}`}\n\t\t\t\t>\n\t\t\t\t\t<span className=\"input-prompt\">{inputPrompt()}</span>\n\n\t\t\t\t\t<TerminalInput\n\t\t\t\t\t\twriteToConsole={this.writeToConsole}\n\t\t\t\t\t\thandleSubmit={this.runCommand}\n\t\t\t\t\t/>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nfunction mapStateToProps(state: RootState): TerminalProps {\n\treturn { consoleInteractive: state.consoleInteractive };\n}\n\nexport default connect(mapStateToProps)(Terminal);\n","import React from 'react';\nimport Terminal from './Terminal';\nimport { initializeLocations } from '../nouns/LocationManifest';\nimport { initializeUtilities } from '../utilities/UtilityManifest';\nimport store, { ActionTypes } from '../store';\nimport { initializeItems } from '../nouns/ItemManifest';\nimport { setUrlLocation } from '../utilities/Cd';\n\nconst INITIAL_LOCATION_SLUG = 'a_quiet_forest';\n\nexport default class App extends React.Component<{}, {}> {\n\tconstructor(props: {}) {\n\t\tsuper(props);\n\n\t\tinitializeLocations();\n\t\tinitializeUtilities();\n\t\tinitializeItems();\n\n\t\tsetUrlLocation({ location: INITIAL_LOCATION_SLUG });\n\n\t\tstore.dispatch({\n\t\t\ttype: ActionTypes.SET_LOCATION,\n\t\t\tvalue: INITIAL_LOCATION_SLUG\n\t\t});\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"main\">\n\t\t\t\t<Terminal />\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './styles/index.scss';\nimport App from './components/App';\n\nimport { Provider } from 'react-redux';\nimport store from './store';\n\nReactDOM.render(\n\t<Provider store={store}>\n\t\t<App />\n\t</Provider>,\n\tdocument.getElementById('root')\n);\n"],"sourceRoot":""}