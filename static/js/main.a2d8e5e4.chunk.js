(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e){e.exports=[{slug:"old_knife",descriptions:["many objects carry with them anonymity.","This knife does not: it was loved as deeply as an object could be loved."],locationSlug:"inside"},{slug:"shovel",descriptions:["mom bought me this mini shovel when I turned fifteen","from the hardware store in town.","this was just before her desperation and sadness blossomed and eventually bore its devastating fruit","like water damage worming through a photo album.","The handle of this shovel is yellow fiberglass and maybe two feet long","And though it has spent years in damp neglect","the galvanized scoop has not rusted deeply.","I recall that the scoop is also sometimes called a blade","and feel the weapon's comfortable heft in my hand"],locationSlug:"trash_heap"}]},19:function(e){e.exports=[{slug:"a_quiet_forest",descriptions:["it is early morning.","cold rain is melting the what remaining empty and wet snow hangs from the boughs of the surrounding trees","I am surrounded by evergreens.","douglas fir.","I can make out a path heading into the fog."]},{slug:"a_path",descriptions:["somewhere in my brain, I am sure","this path is etched deeply and indelible. I could walk it in my sleep.","the ground sucks at my boots","and the moss beckons"]},{slug:"in_front_of_the_cabin",descriptions:["I am standing in front of the house I grew up in","it's been years since I've been back","I experience a strange mixture of feelings","melancholy, though maybe that's just the weather","pride, for leaving","apprehension, for what I know is inside"]},{slug:"side_yard",descriptions:["I tried to start a garden here once","I dreamt, specifically, of rhubarb in winter and tomatillos in summer","I dreamt of bringing these things to the dinner table and sharing them with my parents","it was a na\xefve aspiration, but who could fault a child for such a desire?","the side yard has been unused and unvisited since","a space ceded to the damp clamor of the pacific northwest.","The gate creaks in the wind.","And by it is a pile of cans and other refuse."]},{slug:"trash_heap",descriptions:["Towards the end, dad talked a lot about how the Oregon government was scamming us","by making us pay for can and bottle deposits they knew we'd never redeem","he started hoarding his empties, bragging about the big dinner he'd take us out on when he took them to the place.","over time, this project grew and consumed my garden.","I pick through the moss-covered aluminum like an archaeologist","and I find several parts of my childhood I had tried to forget."]},{slug:"backyard",descriptions:["a mockery of the suburban backyard, with a pool and everything","mom wanted a pool but she hated to swim","dad hated the suburbs but loved pool maintenance","their charade worked until it didn't.","a relic of multicolored plastic survives in the swampy remains of the pool","I am unsettled.","the damp sets into your bones.","I do not wish to stay."]},{slug:"inside",descriptions:["it is a cold cabin.","diffuse light flows and pools and illuminates","why did I return?"]}]},20:function(e){e.exports=[["a_quiet_forest","a_path"],["in_front_of_the_cabin","a_path"],["side_yard","in_front_of_the_cabin"],["side_yard","backyard"],["side_yard","trash_heap"],["in_front_of_the_cabin","inside"],["inside","backyard"]]},23:function(e,t,n){e.exports=n(35)},28:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),r=n(18),i=n.n(r),c=(n(28),n(1)),s=n(2),l=n(4),u=n(3),h=n(5),d=n(7),m=n(13);function p(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,p)}var f=function(){function e(){Object(c.a)(this,e),this.command="",this.helpDescription=""}return Object(s.a)(e,[{key:"run",value:function(e){throw"not implemented"}}]),e}(),v=function(e){function t(){var e,n;Object(c.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).command="echo",n.helpDescription="Use echo to say something out loud. Example:\n\necho Is anyone there?",n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"run",value:function(e){var t=e.args;return(0,e.writeToConsole)({item:t.join(" ")}),Promise.resolve(null)}}]),t}(f),y=function(e){function t(){var e,n;Object(c.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).command="help",n.helpDescription="Use help to make sense of the world.",n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"run",value:function(e){var t=e.writeToConsole,n=e.args;if(n.length>=1){var o=Q[n[0]];t({item:o?o.helpDescription:"I don't know much about ".concat(n.join(" "),".")})}else t({item:"The following utilities are available: ".concat(Object.keys(Q).join(", "),'.\n\nFor help with any particular utility, write "help <utility name>".')});return Promise.resolve(null)}}]),t}(f),b=n(8),g=n(11),O=function e(t){var n=t.descriptions,o=t.slug;Object(c.a)(this,e),this.itemSlugs=[],this.neighborSlugs=[],this.descriptions=n,this.slug=o},w=n(19),j=n(20),k=n(10),S=new O({slug:"loading",descriptions:["loading"]}),C={loading:S},E=!1;var T,_=C;!function(e){e.SET_LOCATION="SET_LOCATION",e.POP_LOCATION_STACK="POP_LOCATION_STACK",e.PUSH_LOCATION_STACK="PUSH_LOCATION_STACK",e.LOCK_CONSOLE="LOCK_CONSOLE",e.RELEASE_CONSOLE="RELEASE_CONSOLE",e.ADD_TO_INVENTORY="ADD_TO_INVENTORY"}(T||(T={}));var I={location:S.slug,previousLocationStack:[],consoleInteractive:!0,inventory:[]};var A=Object(g.b)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T.SET_LOCATION:return Object(b.a)({},e,{location:t.value});case T.PUSH_LOCATION_STACK:return Object(b.a)({},e,{previousLocationStack:[t.value].concat(Object(d.a)(e.previousLocationStack))});case T.POP_LOCATION_STACK:return Object(b.a)({},e,{previousLocationStack:e.previousLocationStack.slice(1)});case T.LOCK_CONSOLE:return Object(b.a)({},e,{consoleInteractive:!1});case T.RELEASE_CONSOLE:return Object(b.a)({},e,{consoleInteractive:!0});case T.ADD_TO_INVENTORY:return Object(b.a)({},e,{inventory:Object(d.a)(e.inventory).concat([t.value])});default:return e}}),L=A;function N(){return _[A.getState().location]}function P(e){return a.a.createElement("span",null,e.places.map(function(e){return a.a.createElement("span",{key:e,className:"place"},e,te)}),e.items.map(function(e){return a.a.createElement("span",{key:e,className:"item"},e,te)}))}var H=function(e){function t(){var e,n;Object(c.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).command="ls",n.helpDescription="ls lists the locations and objects you can reach from where you are now.",n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"run",value:function(e){return(0,e.writeToConsole)({item:a.a.createElement(P,{places:N().neighborSlugs.sort(),items:N().itemSlugs.sort()})}),Promise.resolve(null)}}]),t}(f),D=["I don't remember","But I am glad you asked. I am glad you are here.","I don't know who you are","You are an echo","You were a mistake","You are a dog lover","Or you were"],K=function(e){function t(){var e,n;Object(c.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).command="whoami",n.helpDescription="Ask a difficult question. Get a difficult response",n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"run",value:function(e){var t=e.writeToConsole;return D.reduce(function(e,n){return e.then(function(){return t({item:n,speak:!0})})},Promise.resolve(null))}}]),t}(f),V=function e(t){var n=t.descriptions,o=t.slug,a=t.locationSlug;Object(c.a)(this,e),this.descriptions=n,this.slug=o,this.locationSlug=a},x={},U=!1;var R=x,W=function(e){function t(){var e,n;Object(c.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).command="look",n.helpDescription="Use look to take some time, to see where you are. Some things take longer to see than others.",n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"run",value:function(e){var t=e.writeToConsole,n=e.args;return n.length>0&&("at"!==n[0]||!R[n[1]])?t({item:"invalid ".concat(this.command," argument ").concat(n.join(" "),".")}):("at"===n[0]&&R[n[1]]?R[n[1]].descriptions:N().descriptions).reduce(function(e,n){return e.then(function(){return t({item:n,speak:!0})})},Promise.resolve(null))}}]),t}(f),Y=function(e){function t(){var e,n;Object(c.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).command="cd",n.helpDescription="Use cd to move to a new location. For example:\n\ncd a_cold_cabin",n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"goToPreviousLocation",value:function(){var e=L.getState().previousLocationStack[0];L.dispatch({type:T.POP_LOCATION_STACK}),e&&L.dispatch({type:T.SET_LOCATION,value:e})}},{key:"run",value:function(e){var t=e.args,n=e.writeToConsole,o=Promise.resolve(null);if(t[0].indexOf("..")>=0)for(var a=(t[0].match(/../g)||[]).length,r=0;r<a;r++)this.goToPreviousLocation();else{var i=N().neighborSlugs.find(function(e){return e===t[0]});i?(L.dispatch({type:T.PUSH_LOCATION_STACK,value:L.getState().location}),L.dispatch({type:T.SET_LOCATION,value:i})):n({item:"invalid location ".concat(t[0])})}return q({location:L.getState().location}),o}}]),t}(f);function q(e){e.location}var F=function(e){function t(){var e,n;Object(c.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).interval=0,n.state={content:(new Date).getTime().toString()},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.interval=window.setInterval(function(){e.setState({content:(new Date).getTime().toString()})},1e3)}},{key:"componentWillUnmount",value:function(){window.clearInterval(this.interval)}},{key:"render",value:function(){return a.a.createElement("span",null,this.state.content)}}]),t}(a.a.Component),B=function(e){function t(){var e,n;Object(c.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).command="time",n.helpDescription="time tells you the time",n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"run",value:function(e){return(0,e.writeToConsole)({item:a.a.createElement(F,null)}),Promise.resolve(null)}}]),t}(f),M=function(e){function t(){var e,n;Object(c.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).command="pickup",n.helpDescription="pickup will allow you to add an object to your inventory",n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"run",value:function(e){var t=e.args,n=e.writeToConsole,o=t[0];return R[o]&&N().itemSlugs.indexOf(o)>-1?(N().itemSlugs=N().itemSlugs.filter(function(e){return e!==o}),L.dispatch({type:T.ADD_TO_INVENTORY,value:o}),n({item:"I have picked up the ".concat(o)})):n({item:"There is no ".concat(o," here")}),Promise.resolve(null)}}]),t}(f),J=function(e){function t(){var e,n;Object(c.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).command="inv",n.helpDescription='List all the items currently in your inventory. To use an item, write "use <item>"',n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"run",value:function(e){return(0,e.writeToConsole)({item:L.getState().inventory.join(te)}),Promise.resolve(null)}}]),t}(f),z={},G=!1;var Q=z,X=n(12),Z=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"terminal-buffer"},this.props.terminalHistory.map(function(e){return a.a.createElement(a.a.Fragment,{key:e.id},e.content," ",a.a.createElement("br",null))}))}}]),t}(a.a.Component),$=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={commandHistory:[],currentPlaceInHistory:-1,inputValue:""},n.focusInput=function(){n.inputEl.current&&n.inputEl.current.focus()},n.goBackInHistory=function(){n.setState(function(e){return e.currentPlaceInHistory===e.commandHistory.length-1?null:{currentPlaceInHistory:e.currentPlaceInHistory+1}},function(){var e=n.state.commandHistory[n.state.currentPlaceInHistory];e&&n.setState({inputValue:e.content})})},n.goForwardInHistory=function(){n.setState(function(e){return-1===e.currentPlaceInHistory?null:{currentPlaceInHistory:e.currentPlaceInHistory-1}},function(){-1===n.state.currentPlaceInHistory&&n.setState({inputValue:""});var e=n.state.commandHistory[n.state.currentPlaceInHistory];e&&n.setState({inputValue:e.content})})},n.moveCursorToEnd=function(){window.setTimeout(function(){n.inputEl.current&&(n.inputEl.current.selectionStart=1e3)},0)},n.handleChange=function(e){n.setState({inputValue:e.target.value})},n.handleKeyDown=function(e){switch(e.key){case"ArrowUp":n.goBackInHistory(),n.moveCursorToEnd();break;case"ArrowDown":n.goForwardInHistory(),n.moveCursorToEnd();break;case"Tab":e.preventDefault(),n.tabComplete();break;case"Enter":e.preventDefault(),n.addToCommandHistory(n.state.inputValue),n.props.handleSubmit(n.state.inputValue),n.setState({inputValue:""})}},n.addToCommandHistory=function(e){n.setState(function(t){return{commandHistory:[{content:e,id:p()}].concat(Object(d.a)(t.commandHistory)),currentPlaceInHistory:-1}})},n.tabComplete=function(){if(""!==n.state.inputValue){var e=n.state.inputValue.split(" "),t=Object(m.a)(e),o=t[0],a=t.slice(1),r=a[a.length-1];"undefined"===typeof r&&(r="");var i=Object(d.a)(N().neighborSlugs).concat(Object(d.a)(N().itemSlugs),Object(d.a)(L.getState().inventory)).filter(function(e){return 0===e.indexOf(r)});switch(i.length){case 0:break;case 1:var c=[o].concat(Object(d.a)(a.slice(0,a.length-1)),[i[0]]).join(" ");n.setState({inputValue:c});break;default:n.props.writeToConsole({item:i.reduce(function(e,t){return"".concat(e).concat(te).concat(t)})})}}},n.inputEl=a.a.createRef(),n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("click",this.focusInput)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.focusInput)}},{key:"render",value:function(){return a.a.createElement("input",{className:"input",type:"text",onKeyDown:this.handleKeyDown,onChange:this.handleChange,ref:this.inputEl,value:this.state.inputValue})}}]),t}(a.a.Component);function ee(){return"~/".concat(L.getState().location," > ")}var te="    ",ne=function(e){function t(){var e,n;Object(c.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={terminalHistory:[{content:"you are in a cold and quiet forest",id:p()},{content:"rain has recently fallen",id:p()},{content:'type "help", then press enter, to get started',id:p()}]},n.consoleWriters=[],n.handleKeydown=function(e){var t=e,o=t.key;("Escape"===o||t.ctrlKey&&["c","C","d","D"].indexOf(o)>=0)&&(n.revokeConsoleWriters(),window.speechSynthesis.cancel(),L.dispatch({type:T.RELEASE_CONSOLE}))},n.getRevocableConsoleWriter=function(){var e=!1;return{revoke:function(){e=!0},writeToConsole:function(t){return e?Promise.resolve(null):n.writeToConsole(t)}}},n.revokeConsoleWriters=function(){n.consoleWriters.forEach(function(e){e.revoke()}),n.consoleWriters=[]},n.runCommand=function(e){var t=e.split(" "),o=Object(m.a)(t),a=o[0],r=o.slice(1),i=Q[a];if(n.writeToConsole({item:"".concat(ee()).concat(e)}),i){var c=n.getRevocableConsoleWriter();n.consoleWriters.push(c),L.dispatch({type:T.LOCK_CONSOLE}),i.run({args:r,writeToConsole:c.writeToConsole}).then(function(){L.dispatch({type:T.RELEASE_CONSOLE})}).catch(console.error)}else n.writeToConsole({item:"I don't know how to ".concat(a)})},n.writeToConsole=function(e){var t=e.item,o=e.speak,a=null;if(o&&"string"!==typeof t)throw'cannot "speak" a component';return o&&"string"===typeof t&&(a=function(e){var t=new SpeechSynthesisUtterance(e);return t.rate=.9,t.pitch=.8,window.speechSynthesis.speak(t),new Promise(function(e){t.onend=function(){window.setTimeout(e,300)}})}(t)),n.setState(function(e){return{terminalHistory:Object(d.a)(e.terminalHistory).concat([{content:t,id:p()}])}}),a||Promise.resolve(null)},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeydown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeydown)}},{key:"render",value:function(){var e=this.state.terminalHistory,t=this.props.consoleInteractive;return a.a.createElement("div",{className:"terminal"},a.a.createElement(Z,{terminalHistory:e}),a.a.createElement("form",{className:"input-form ".concat(t?"active":"")},a.a.createElement("span",{className:"input-prompt"},ee()),a.a.createElement($,{writeToConsole:this.writeToConsole,handleSubmit:this.runCommand})))}}]),t}(a.a.Component);var oe=Object(X.b)(function(e){return{consoleInteractive:e.consoleInteractive}})(ne),ae="a_quiet_forest",re=function(e){function t(e){var n;return Object(c.a)(this,t),n=Object(l.a)(this,Object(u.a)(t).call(this,e)),E||(E=!0,w.forEach(function(e){C[e.slug]=new O(e)}),j.forEach(function(e){C[e[0]].neighborSlugs.push(e[1]),C[e[1]].neighborSlugs.push(e[0])}),k.forEach(function(e){if("undefined"===typeof C[e.locationSlug])throw"".concat(e.slug," has location ").concat(e.locationSlug,", which does not exist");C[e.locationSlug].itemSlugs.push(e.slug)})),G||(G=!0,[new v,new y,new H,new K,new Y,new W,new B,new M,new J].forEach(function(e){z[e.command]=e})),U||(U=!0,k.forEach(function(e){x[e.slug]=new V(e)})),q({location:ae}),L.dispatch({type:T.SET_LOCATION,value:ae}),n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"main"},a.a.createElement(oe,null))}}]),t}(a.a.Component);i.a.render(a.a.createElement(X.a,{store:L},a.a.createElement(re,null)),document.getElementById("root"))}},[[23,2,1]]]);
//# sourceMappingURL=main.a2d8e5e4.chunk.js.map