(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e){e.exports=[{slug:"old_knife",description:"many objects carry with them anonymity. This knife does not: it was loved as deeply as an object could be loved. the blade is chipped and ",locationSlug:"inside"},{slug:"shovel",description:"your mom bought you this shovel when you turned fifteen from the hardware store in town. this was just before her desperation and sadness truly bloomed and bore its devastating fruit, like water damage worming through photo album.",locationSlug:"side_yard"}]},19:function(e){e.exports=[{slug:"a_quiet_forest",descriptions:[{text:"it is early morning"},{text:"cold rain is melting the remaining snow hanging from the boughs of the surround trees"},{text:"you are surrounded by evergreens."},{text:"douglas fir"},{text:"you can make out a path heading into the fog"}]},{slug:"a_path",descriptions:[{text:"somewhere in your brain, you are sure"},{text:"this path is etched deep and indelible. You could walk it in your sleep."},{text:"the ground sucks at your boots"},{text:"the moss beckons"}]},{slug:"in_front_of_the_cabin",descriptions:[{text:"you are standing in front of the house you grew up in"},{text:"it's been years since you've been back"},{text:"you experience a strange mixture of feelings"},{text:"melancholy, though maybe that's just the weather"},{text:"pride, for leaving"},{text:"apprehension, for what you know is inside"}]},{slug:"side_yard",descriptions:[{text:"you tried to start a garden here once"},{text:"you dreamt, specifically, of rhubarb in winter and tomatillos in summer"},{text:"you dreamt of bringing these things to the dinner table and sharing them with your parents"},{text:"it was a na\xefve aspiration, but who could fault you for such a desire?"},{text:"the side yard has been unused, unvisited since"},{text:"a space ceded to the damp and clamoring claw of the pacific northwest"},{text:"a weathered shovel bears aged witness to your efforts"},{text:"and the gate creaks in the wind"}]},{slug:"backyard",descriptions:[{text:"a mockery of the suburban backyard, with a pool and everything"},{text:"mom wanted a pool but she hated to swim"},{text:"dad hated the suburbs but loved pool maintenance"},{text:"their charade worked until it didn't."},{text:"a relic of multicolored plastic survives in the swampy remains of the pool"},{text:"you are unsettled."},{text:"the damp sets into your bones."},{text:"you do not wish to stay."}]},{slug:"inside",descriptions:[{text:"it is a cold cabin"},{text:"someone somebody once loved, probably, is here"},{text:"sitting alone at a table set for two,"},{text:"dead."},{text:"diffuse light flows and pools and illuminates"},{text:"why did I return?, you wonder"},{text:"alack, there is no answer"}]},{slug:"somebody_once_loved",descriptions:[{text:"you struggle to make out anything about them. The stench is magnificent."}]}]},20:function(e){e.exports=[["a_quiet_forest","a_path"],["in_front_of_the_cabin","a_path"],["side_yard","in_front_of_the_cabin"],["side_yard","backyard"],["inside","somebody_once_loved"],["inside","backyard"]]},23:function(e,t,n){e.exports=n(35)},28:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),r=n(18),i=n.n(r),c=(n(28),n(1)),s=n(2),u=n(4),l=n(3),h=n(5),d=n(7),p=n(13);function m(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,m)}var f=function(){function e(){Object(c.a)(this,e),this.command="",this.helpDescription=""}return Object(s.a)(e,[{key:"run",value:function(e){throw"not implemented"}}]),e}(),y=function(e){function t(){var e,n;Object(c.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).command="echo",n.helpDescription="Use echo to say something out loud. Example:\n\necho Is anyone there?",n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"run",value:function(e){var t=e.args;return(0,e.writeToConsole)({item:t.join(" ")}),Promise.resolve(null)}}]),t}(f),v=function(e){function t(){var e,n;Object(c.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).command="help",n.helpDescription="Use help to make sense of the world.",n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"run",value:function(e){var t=e.writeToConsole,n=e.args;if(n.length>=1){var o=Q[n[0]];t({item:o?o.helpDescription:"I don't know much about ".concat(n.join(" "),".")})}else t({item:"The following utilities are available: ".concat(Object.keys(Q).join(", "),'.\n\nFor help with any particular utility, write "help <utility name>".')});return Promise.resolve(null)}}]),t}(f),b=n(8),O=n(11),g=function e(t){var n=t.descriptions,o=t.slug;Object(c.a)(this,e),this.itemSlugs=[],this.neighborSlugs=[],this.descriptions=n,this.slug=o},w=n(19),j=n(20),k=n(10),E=new g({slug:"loading",descriptions:[{text:"loading"}]}),S={loading:E},C=!1;var T,_=S;!function(e){e.SET_LOCATION="SET_LOCATION",e.POP_LOCATION_STACK="POP_LOCATION_STACK",e.PUSH_LOCATION_STACK="PUSH_LOCATION_STACK",e.LOCK_CONSOLE="LOCK_CONSOLE",e.RELEASE_CONSOLE="RELEASE_CONSOLE",e.ADD_TO_INVENTORY="ADD_TO_INVENTORY"}(T||(T={}));var x={location:E.slug,previousLocationStack:[],consoleInteractive:!0,inventory:[]};var I=Object(O.b)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T.SET_LOCATION:return Object(b.a)({},e,{location:t.value});case T.PUSH_LOCATION_STACK:return Object(b.a)({},e,{previousLocationStack:[t.value].concat(Object(d.a)(e.previousLocationStack))});case T.POP_LOCATION_STACK:return Object(b.a)({},e,{previousLocationStack:e.previousLocationStack.slice(1)});case T.LOCK_CONSOLE:return Object(b.a)({},e,{consoleInteractive:!1});case T.RELEASE_CONSOLE:return Object(b.a)({},e,{consoleInteractive:!0});case T.ADD_TO_INVENTORY:return Object(b.a)({},e,{inventory:Object(d.a)(e.inventory).concat([t.value])});default:return e}}),A=I;function L(){return _[I.getState().location]}function N(e){return a.a.createElement("span",null,e.places.map(function(e){return a.a.createElement("span",{key:e,className:"place"},e,te)}),e.items.map(function(e){return a.a.createElement("span",{key:e,className:"item"},e,te)}))}var P=function(e){function t(){var e,n;Object(c.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).command="ls",n.helpDescription="ls lists the locations and objects you can reach from where you are now.",n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"run",value:function(e){return(0,e.writeToConsole)({item:a.a.createElement(N,{places:L().neighborSlugs.sort(),items:L().itemSlugs.sort()})}),Promise.resolve(null)}}]),t}(f),H=["I don't remember","But I am glad you asked. I am glad you are here.","I don't know who you are","You are an echo","You were a mistake","You are a dog lover","Or you were"],D=function(e){function t(){var e,n;Object(c.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).command="whoami",n.helpDescription="Ask a difficult question. Get a difficult response",n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"run",value:function(e){var t=e.writeToConsole;return H.reduce(function(e,n){return e.then(function(){return t({item:n,speak:!0})})},Promise.resolve(null))}}]),t}(f),K=function e(t){var n=t.description,o=t.slug,a=t.locationSlug;Object(c.a)(this,e),this.description=n,this.slug=o,this.locationSlug=a},V={},U=!1;var R=V,W=function(e){function t(){var e,n;Object(c.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).command="look",n.helpDescription="Use look to take some time, to see where you are. Some things take longer to see than others.",n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"run",value:function(e){var t=e.writeToConsole,n=e.args;return"at"===n[0]&&R[n[1]]?t({item:R[n[1]].description,speak:!0}):n.length>0?t({item:"invalid ".concat(this.command," argument ").concat(n.join(" "),".")}):L().descriptions.reduce(function(e,n){var o=n.text;return e.then(function(){return t({item:o,speak:!0})})},Promise.resolve(null))}}]),t}(f),Y=function(e){function t(){var e,n;Object(c.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).command="cd",n.helpDescription="Use cd to move to a new location. For example:\n\ncd a_cold_cabin",n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"goToPreviousLocation",value:function(){var e=A.getState().previousLocationStack[0];A.dispatch({type:T.POP_LOCATION_STACK}),e&&A.dispatch({type:T.SET_LOCATION,value:e})}},{key:"run",value:function(e){var t=e.args,n=e.writeToConsole,o=Promise.resolve(null);if(t[0].indexOf("..")>=0)for(var a=(t[0].match(/../g)||[]).length,r=0;r<a;r++)this.goToPreviousLocation();else{var i=L().neighborSlugs.find(function(e){return e===t[0]});i?(A.dispatch({type:T.PUSH_LOCATION_STACK,value:A.getState().location}),A.dispatch({type:T.SET_LOCATION,value:i})):n({item:"invalid location ".concat(t[0])})}return F({location:A.getState().location}),o}}]),t}(f);function F(e){var t=e.location,n=window.location.href,o=n.substring(0,n.lastIndexOf("/")+1)+t;window.history.pushState({path:o},"",o)}var q=function(e){function t(){var e,n;Object(c.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).interval=0,n.state={content:(new Date).getTime().toString()},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.interval=window.setInterval(function(){e.setState({content:(new Date).getTime().toString()})},1e3)}},{key:"componentWillUnmount",value:function(){window.clearInterval(this.interval)}},{key:"render",value:function(){return a.a.createElement("span",null,this.state.content)}}]),t}(a.a.Component),B=function(e){function t(){var e,n;Object(c.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).command="time",n.helpDescription="time tells you the time",n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"run",value:function(e){return(0,e.writeToConsole)({item:a.a.createElement(q,null)}),Promise.resolve(null)}}]),t}(f),M=function(e){function t(){var e,n;Object(c.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).command="pickup",n.helpDescription="pickup will allow you to add an object to your inventory",n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"run",value:function(e){var t=e.args,n=e.writeToConsole,o=t[0];return R[o]&&L().itemSlugs.indexOf(o)>-1?(L().itemSlugs=L().itemSlugs.filter(function(e){return e!==o}),A.dispatch({type:T.ADD_TO_INVENTORY,value:o}),n({item:"I have picked up the ".concat(o)})):n({item:"There is no ".concat(o," here")}),Promise.resolve(null)}}]),t}(f),J=function(e){function t(){var e,n;Object(c.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).command="inv",n.helpDescription='List all the items currently in your inventory. To use an item, write "use <item>"',n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"run",value:function(e){return(0,e.writeToConsole)({item:A.getState().inventory.join(te)}),Promise.resolve(null)}}]),t}(f),G={},z=!1;var Q=G,X=n(12),Z=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"terminal-buffer"},this.props.terminalHistory.map(function(e){return a.a.createElement(a.a.Fragment,{key:e.id},e.content," ",a.a.createElement("br",null))}))}}]),t}(a.a.Component),$=function(e){function t(){var e,n;Object(c.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).state={commandHistory:[],currentPlaceInHistory:-1},n.inputEl=null,n.focusInput=function(){n.inputEl&&n.inputEl.focus()},n.goBackInHistory=function(){n.setState(function(e){return e.currentPlaceInHistory===e.commandHistory.length-1?null:{currentPlaceInHistory:e.currentPlaceInHistory+1}},function(){var e=n.state.commandHistory[n.state.currentPlaceInHistory];e&&(n.inputValue=e.content)})},n.goForwardInHistory=function(){n.setState(function(e){return-1===e.currentPlaceInHistory?null:{currentPlaceInHistory:e.currentPlaceInHistory-1}},function(){-1===n.state.currentPlaceInHistory&&(n.inputValue="");var e=n.state.commandHistory[n.state.currentPlaceInHistory];e&&(n.inputValue=e.content)})},n.moveCursorToEnd=function(){window.setTimeout(function(){n.inputEl&&(n.inputEl.selectionStart=1e3)},0)},n.handleKeyDown=function(e){switch(e.key){case"ArrowUp":n.goBackInHistory(),n.moveCursorToEnd();break;case"ArrowDown":n.goForwardInHistory(),n.moveCursorToEnd();break;case"Tab":e.preventDefault(),n.tabComplete();break;case"Enter":e.preventDefault(),n.addToCommandHistory(n.inputValue),n.props.handleSubmit(n.inputValue),n.inputValue=""}},n.addToCommandHistory=function(e){n.setState(function(t){return{commandHistory:[{content:e,id:m()}].concat(Object(d.a)(t.commandHistory)),currentPlaceInHistory:-1}})},n.tabComplete=function(){if(""!==n.inputValue){var e=n.inputValue.split(" "),t=Object(p.a)(e),o=t[0],a=t.slice(1),r=a[a.length-1];"undefined"===typeof r&&(r="");var i=Object(d.a)(L().neighborSlugs).concat(Object(d.a)(L().itemSlugs)).filter(function(e){return 0===e.indexOf(r)});switch(i.length){case 0:break;case 1:var c=[o].concat(Object(d.a)(a.slice(0,a.length-1)),[i[0]]).join(" ");n.inputValue=c;break;default:n.props.writeToConsole({item:i.reduce(function(e,t){return"".concat(e).concat(te).concat(t)})})}}},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("click",this.focusInput)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.focusInput)}},{key:"render",value:function(){var e=this;return a.a.createElement(a.a.Fragment,null,a.a.createElement("input",{className:"input",type:"text",onKeyDown:this.handleKeyDown,ref:function(t){e.inputEl=t,e.inputEl&&e.inputEl.focus()}}))}},{key:"inputValue",get:function(){return this.inputEl?this.inputEl.value:""},set:function(e){this.inputEl&&(this.inputEl.value=e)}}]),t}(a.a.Component);function ee(){return"~/".concat(A.getState().location," > ")}var te="    ",ne=function(e){function t(){var e,n;Object(c.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).state={terminalHistory:[{content:"you are in a cold and quiet forest",id:m()},{content:"rain has recently fallen",id:m()},{content:'type "help", then press enter, to get started',id:m()}]},n.consoleWriters=[],n.handleKeydown=function(e){var t=e,o=t.key;("Escape"===o||t.ctrlKey&&["c","C","d","D"].indexOf(o)>=0)&&(n.revokeConsoleWriters(),A.dispatch({type:T.RELEASE_CONSOLE}))},n.getRevocableConsoleWriter=function(){var e=!1;return{revoke:function(){e=!0},writeToConsole:function(t){return e?Promise.resolve(null):n.writeToConsole(t)}}},n.revokeConsoleWriters=function(){n.consoleWriters.forEach(function(e){e.revoke()}),n.consoleWriters=[]},n.runCommand=function(e){var t=e.split(" "),o=Object(p.a)(t),a=o[0],r=o.slice(1),i=Q[a];if(n.writeToConsole({item:"".concat(ee()).concat(e)}),i){var c=n.getRevocableConsoleWriter();n.consoleWriters.push(c),A.dispatch({type:T.LOCK_CONSOLE}),i.run({args:r,writeToConsole:c.writeToConsole}).then(function(){A.dispatch({type:T.RELEASE_CONSOLE})}).catch(function(e){return console.error})}else n.writeToConsole({item:"I don't know how to ".concat(a)})},n.writeToConsole=function(e){var t=e.item,o=e.speak,a=null;if(o&&"string"!==typeof t)throw'cannot "speak" a component';return o&&"string"===typeof t&&(a=function(e){var t=new SpeechSynthesisUtterance(e);return window.speechSynthesis.speak(t),new Promise(function(e){t.onend=function(){window.setTimeout(e,250)}})}(t)),n.setState(function(e){return{terminalHistory:Object(d.a)(e.terminalHistory).concat([{content:t,id:m()}])}}),a||Promise.resolve(null)},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeydown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeydown)}},{key:"render",value:function(){var e=this.state.terminalHistory,t=this.props.consoleInteractive;return a.a.createElement("div",{className:"terminal"},a.a.createElement(Z,{terminalHistory:e}),a.a.createElement("form",{className:"input-form ".concat(t?"active":"")},a.a.createElement("span",{className:"input-prompt"},ee()),a.a.createElement($,{writeToConsole:this.writeToConsole,handleSubmit:this.runCommand})))}}]),t}(a.a.Component);var oe=Object(X.b)(function(e){return{consoleInteractive:e.consoleInteractive}})(ne),ae="a_quiet_forest",re=function(e){function t(e){var n;return Object(c.a)(this,t),n=Object(u.a)(this,Object(l.a)(t).call(this,e)),C||(C=!0,w.forEach(function(e){S[e.slug]=new g(e)}),j.forEach(function(e){S[e[0]].neighborSlugs.push(e[1]),S[e[1]].neighborSlugs.push(e[0])}),k.forEach(function(e){if("undefined"===typeof S[e.locationSlug])throw"".concat(e.slug," has location ").concat(e.locationSlug,", which does not exist");S[e.locationSlug].itemSlugs.push(e.slug)})),z||(z=!0,[new y,new v,new P,new D,new Y,new W,new B,new M,new J].forEach(function(e){G[e.command]=e})),U||(U=!0,k.forEach(function(e){V[e.slug]=new K(e)})),F({location:ae}),A.dispatch({type:T.SET_LOCATION,value:ae}),n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"main"},a.a.createElement(oe,null))}}]),t}(a.a.Component);i.a.render(a.a.createElement(X.a,{store:A},a.a.createElement(re,null)),document.getElementById("root"))}},[[23,2,1]]]);
//# sourceMappingURL=main.e7c83e99.chunk.js.map