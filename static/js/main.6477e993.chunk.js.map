{"version":3,"sources":["utils/uuid.ts","nouns/Location.ts","nouns/LocationManifest.ts","store.ts","utils/OutputController.ts","utils/SpeechUtilities.ts","utilities/BaseUtility.ts","utilities/Echo.ts","utilities/Help.ts","utilities/Ls.tsx","utilities/WhoAmI.ts","nouns/Item.ts","nouns/ItemManifest.ts","utilities/Look.ts","utilities/Cd.ts","utilities/Time.tsx","utilities/Pickup.ts","utilities/Inventory.ts","utilities/Mute.ts","utilities/UtilityManifest.ts","components/TerminalBuffer.tsx","components/TerminalInput.tsx","components/Terminal.tsx","components/App.tsx","index.tsx"],"names":["uuid","a","Math","random","toString","replace","Location","_ref","descriptions","slug","Object","classCallCheck","this","itemSlugs","neighborSlugs","loading","LocationManifest","hasRun","ActionTypes","initialState","location","loadingLocation","previousLocationStack","consoleInteractive","inventory","history","soundOn","store","createStore","state","arguments","length","undefined","action","type","SET_LOCATION","objectSpread","value","PUSH_LOCATION_STACK","concat","toConsumableArray","POP_LOCATION_STACK","slice","LOCK_CONSOLE","RELEASE_CONSOLE","ADD_TO_INVENTORY","ADD_TO_HISTORY","TOGGLE_SOUND","src_store","getCurrentLocation","getState","OutputController","revoked","revocableOutputter","revoke","output","args","Promise","resolve","revocableOutputters","push","content","speak","speechPromise","text","utterance","SpeechSynthesisUtterance","rate","pitch","volume","window","speechSynthesis","onend","setTimeout","say","newHistoryItem","id","historyManifest","dispatch","forEach","outputter","revokeOutputters","cancel","BaseUtility","command","helpDescription","_params","getRevocableOutputter","_run","Echo","join","Help","util","UtilityManifest","keys","LsComponent","props","react_default","createElement","places","map","place","key","className","TAB_WIDTH","items","item","Ls","sort","responses","WhoAmI","reduce","memo","then","Item","locationSlug","ItemManifest","Look","Cd","newLocation","nullPromise","indexOf","count","match","i","goToPreviousLocation","find","setUrlLocation","_ref2","TimeComponent","interval","Date","getTime","_this2","setInterval","setState","clearInterval","React","Component","Time","Time_TimeComponent","Pickup","filter","itemSlug","Inventory","Mute","objectDestructuringEmpty","connect","terminalHistory","Fragment","TerminalInput","_this","possibleConstructorReturn","getPrototypeOf","call","commandHistory","currentPlaceInHistory","inputValue","focusInput","inputEl","current","focus","goBackInHistory","goForwardInHistory","moveCursorToEnd","selectionStart","handleChange","e","target","handleKeyDown","preventDefault","tabComplete","addToCommandHistory","handleSubmit","_this$state$inputValu","split","_this$state$inputValu2","toArray","rest","lastValue","options","newValue","option","createRef","addEventListener","removeEventListener","onKeyDown","onChange","ref","inputPrompt","Terminal","handleKeydown","typedEvent","ctrlKey","stopOutput","runCommand","_value$split","_value$split2","utilityName","utility","run","catch","console","error","components_TerminalBuffer","TerminalInput_TerminalInput","INITIAL_LOCATION_SLUG","App","locations","neighbors","neighborPair","components_Terminal","ReactDOM","render","es","App_App","document","getElementById"],"mappings":"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","file":"static/js/main.6477e993.chunk.js","sourcesContent":["// simplest UUID implementation\n// https://gist.github.com/jed/982883\n\nexport default function uuid(a?: number): string {\n\treturn a\n\t\t? (a ^ ((Math.random() * 16) >> (a / 4))).toString(16)\n\t\t: (([1e7] as any) + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, uuid);\n}\n","interface Args {\n\tslug: string;\n\tdescriptions: string[];\n}\n\nexport default class Location {\n\tconstructor({ descriptions, slug }: Args) {\n\t\tthis.descriptions = descriptions;\n\t\tthis.slug = slug;\n\t}\n\n\tdescriptions: string[];\n\tslug: string;\n\titemSlugs: string[] = [];\n\tneighborSlugs: string[] = [];\n}\n","import Location from './Location';\n\nimport locations from '../data/locations.json';\nimport neighbors from '../data/neighbors.json';\nimport items from '../data/items.json';\n\nexport const loading = new Location({\n\tslug: 'loading',\n\tdescriptions: ['loading']\n});\n\nconst LocationManifest: { [s: string]: Location } = {\n\tloading\n};\n\nlet hasRun: boolean = false;\n\nexport function initializeLocations() {\n\tif (hasRun) {\n\t\treturn;\n\t}\n\n\thasRun = true;\n\n\tlocations.forEach(location => {\n\t\tLocationManifest[location.slug] = new Location(location);\n\t});\n\n\tneighbors.forEach(neighborPair => {\n\t\tLocationManifest[neighborPair[0]].neighborSlugs.push(neighborPair[1]);\n\n\t\tLocationManifest[neighborPair[1]].neighborSlugs.push(neighborPair[0]);\n\t});\n\n\titems.forEach(item => {\n\t\tif (typeof LocationManifest[item.locationSlug] === 'undefined') {\n\t\t\tthrow `${item.slug} has location ${\n\t\t\t\titem.locationSlug\n\t\t\t}, which does not exist`;\n\t\t}\n\n\t\tLocationManifest[item.locationSlug].itemSlugs.push(item.slug);\n\t});\n}\n\nexport default LocationManifest;\n","import { createStore } from 'redux';\nimport Location from './nouns/Location';\nimport LocationManifest, {\n\tloading as loadingLocation\n} from './nouns/LocationManifest';\n\nexport interface RootState {\n\tlocation: string;\n\tpreviousLocationStack: string[];\n\tconsoleInteractive: boolean;\n\tinventory: string[];\n\thistory: string[];\n\tsoundOn: boolean;\n}\n\nexport enum ActionTypes {\n\tSET_LOCATION = 'SET_LOCATION',\n\tPOP_LOCATION_STACK = 'POP_LOCATION_STACK',\n\tPUSH_LOCATION_STACK = 'PUSH_LOCATION_STACK',\n\tLOCK_CONSOLE = 'LOCK_CONSOLE',\n\tRELEASE_CONSOLE = 'RELEASE_CONSOLE',\n\tADD_TO_INVENTORY = 'ADD_TO_INVENTORY',\n\tADD_TO_HISTORY = 'ADD_TO_HISTORY',\n\tTOGGLE_SOUND = 'TOGGLE_SOUND'\n}\n\ninterface SetLocation {\n\ttype: ActionTypes.SET_LOCATION;\n\tvalue: string;\n}\n\ninterface PopLocationStack {\n\ttype: ActionTypes.POP_LOCATION_STACK;\n}\n\ninterface PushLocationStack {\n\ttype: ActionTypes.PUSH_LOCATION_STACK;\n\tvalue: string;\n}\n\ninterface LockConsole {\n\ttype: ActionTypes.LOCK_CONSOLE;\n}\n\ninterface ReleaseConsole {\n\ttype: ActionTypes.RELEASE_CONSOLE;\n}\n\ninterface AddToInventory {\n\ttype: ActionTypes.ADD_TO_INVENTORY;\n\tvalue: string;\n}\n\ninterface AddToHistory {\n\ttype: ActionTypes.ADD_TO_HISTORY;\n\tvalue: string;\n}\n\ninterface ToggleSound {\n\ttype: ActionTypes.TOGGLE_SOUND;\n}\n\nconst initialState: RootState = {\n\tlocation: loadingLocation.slug,\n\tpreviousLocationStack: [],\n\tconsoleInteractive: true,\n\tinventory: [],\n\thistory: [],\n\tsoundOn: true\n};\n\ntype CombinedAction =\n\t| SetLocation\n\t| PopLocationStack\n\t| PushLocationStack\n\t| LockConsole\n\t| ReleaseConsole\n\t| AddToInventory\n\t| AddToHistory\n\t| ToggleSound;\n\nfunction reducer(\n\tstate: RootState = initialState,\n\taction: CombinedAction\n): RootState {\n\tswitch (action.type) {\n\t\tcase ActionTypes.SET_LOCATION:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tlocation: action.value\n\t\t\t};\n\t\tcase ActionTypes.PUSH_LOCATION_STACK:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tpreviousLocationStack: [\n\t\t\t\t\taction.value,\n\t\t\t\t\t...state.previousLocationStack\n\t\t\t\t]\n\t\t\t};\n\t\tcase ActionTypes.POP_LOCATION_STACK:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tpreviousLocationStack: state.previousLocationStack.slice(1)\n\t\t\t};\n\t\tcase ActionTypes.LOCK_CONSOLE:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tconsoleInteractive: false\n\t\t\t};\n\t\tcase ActionTypes.RELEASE_CONSOLE:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tconsoleInteractive: true\n\t\t\t};\n\t\tcase ActionTypes.ADD_TO_INVENTORY:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tinventory: [...state.inventory, action.value]\n\t\t\t};\n\t\tcase ActionTypes.ADD_TO_HISTORY:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\thistory: [...state.history, action.value]\n\t\t\t};\n\t\tcase ActionTypes.TOGGLE_SOUND:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tsoundOn: !state.soundOn\n\t\t\t};\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\n\nconst store = createStore(reducer);\n\nexport default store;\n\nexport function getCurrentLocation(): Location {\n\treturn LocationManifest[store.getState().location];\n}\n","import { HistoryItemContent, HistoryItem } from '../components/Terminal';\nimport say, { cancelSpeech } from './SpeechUtilities';\nimport uuid from './uuid';\nimport store, { ActionTypes } from '../store';\n\nexport type OutputterFunction = (arg1: IOutputterArgs) => Promise<null>;\n\nexport type IOutputterArgs = {\n\tcontent: HistoryItemContent;\n\tspeak?: boolean;\n};\n\ninterface RevocableOutputter {\n\trevoke: () => void;\n\toutput: OutputterFunction;\n}\n\nexport default class OutputController {\n\tstatic historyManifest: { [key: string]: HistoryItemContent } = {};\n\tprivate static revocableOutputters: RevocableOutputter[] = [];\n\n\tstatic getRevocableOutputter(): OutputterFunction {\n\t\tlet revoked = false;\n\n\t\tconst revocableOutputter = {\n\t\t\trevoke: () => {\n\t\t\t\trevoked = true;\n\t\t\t},\n\t\t\toutput: (args: IOutputterArgs) =>\n\t\t\t\trevoked ? Promise.resolve(null) : OutputController.output(args)\n\t\t};\n\n\t\tOutputController.revocableOutputters.push(revocableOutputter);\n\n\t\treturn revocableOutputter.output;\n\t}\n\n\tstatic output({ content, speak }: IOutputterArgs): Promise<null> {\n\t\tlet speechPromise = null;\n\n\t\tif (speak && typeof content !== 'string') {\n\t\t\tthrow 'cannot \"speak\" a component';\n\t\t} else if (speak && typeof content === 'string') {\n\t\t\tspeechPromise = say(content);\n\t\t}\n\n\t\tconst newHistoryItem: HistoryItem = { id: uuid(), content };\n\n\t\tOutputController.historyManifest[newHistoryItem.id] =\n\t\t\tnewHistoryItem.content;\n\n\t\tstore.dispatch({\n\t\t\ttype: ActionTypes.ADD_TO_HISTORY,\n\t\t\tvalue: newHistoryItem.id\n\t\t});\n\n\t\treturn speechPromise ? speechPromise : Promise.resolve(null);\n\t}\n\n\tprivate static revokeOutputters() {\n\t\tOutputController.revocableOutputters.forEach(outputter => {\n\t\t\toutputter.revoke();\n\t\t});\n\n\t\tthis.revocableOutputters = [];\n\t}\n\n\tstatic stopOutput() {\n\t\tthis.revokeOutputters();\n\t\tcancelSpeech();\n\t\tstore.dispatch({ type: ActionTypes.RELEASE_CONSOLE });\n\t}\n}\n","import store from '../store';\n\nexport default function say(text: string): Promise<null> {\n\tconst utterance = new SpeechSynthesisUtterance(text);\n\n\tutterance.rate = 0.9;\n\tutterance.pitch = 0.8;\n\tutterance.volume = store.getState().soundOn ? 1 : 0;\n\n\twindow.speechSynthesis.speak(utterance);\n\n\treturn new Promise(resolve => {\n\t\tutterance.onend = () => {\n\t\t\twindow.setTimeout(resolve, 300);\n\t\t};\n\t});\n}\n\nexport function cancelSpeech(): void {\n\twindow.speechSynthesis.cancel();\n}\n","import OutputController, { OutputterFunction } from '../utils/OutputController';\n\nexport interface RunParams {\n\targs: string[];\n}\n\nexport interface PrivateRunParams {\n\targs: string[];\n\toutput: OutputterFunction;\n}\n\nexport default class BaseUtility {\n\trun(_params: RunParams): Promise<null> {\n\t\tconst output = OutputController.getRevocableOutputter();\n\n\t\treturn this._run({ ..._params, output });\n\t}\n\n\t_run(_params: PrivateRunParams): Promise<null> {\n\t\tthrow 'not implemented';\n\t}\n\n\tcommand: string = '';\n\thelpDescription: string = '';\n}\n","import BaseUtility, { PrivateRunParams } from './BaseUtility';\n\nexport default class Echo extends BaseUtility {\n\t_run({ args, output }: PrivateRunParams): Promise<null> {\n\t\toutput({ content: args.join(' ') });\n\t\treturn Promise.resolve(null);\n\t}\n\n\tcommand = 'echo';\n\thelpDescription =\n\t\t'Use echo to say something out loud. Example:\\n\\necho Is anyone there?';\n}\n","import BaseUtility, { PrivateRunParams } from './BaseUtility';\nimport UtilityManifest from './UtilityManifest';\n\nexport default class Help extends BaseUtility {\n\t_run({ output, args }: PrivateRunParams): Promise<null> {\n\t\tif (args.length >= 1) {\n\t\t\tconst util = UtilityManifest[args[0]];\n\t\t\tconst description = util\n\t\t\t\t? util.helpDescription\n\t\t\t\t: `I don't know much about ${args.join(' ')}.`;\n\n\t\t\toutput({ content: description });\n\t\t} else {\n\t\t\toutput({\n\t\t\t\tcontent: `The following utilities are available: ${Object.keys(\n\t\t\t\t\tUtilityManifest\n\t\t\t\t).join(\n\t\t\t\t\t', '\n\t\t\t\t)}.\\n\\nFor help with any particular utility, write \"help <utility name>\".\\n\\nTo stop a dialogue, hit escape or ctrl+c`\n\t\t\t});\n\t\t}\n\n\t\treturn Promise.resolve(null);\n\t}\n\n\tcommand = 'help';\n\thelpDescription = 'Use help to make sense of the world.';\n}\n","import React from 'react';\n\nimport BaseUtility, { PrivateRunParams } from './BaseUtility';\nimport { getCurrentLocation } from '../store';\nimport { TAB_WIDTH } from '../components/Terminal';\n\ninterface Props {\n\titems: string[];\n\tplaces: string[];\n}\n\nfunction LsComponent(props: Props) {\n\treturn (\n\t\t<span>\n\t\t\t{props.places.map(place => (\n\t\t\t\t<span key={place} className=\"place\">\n\t\t\t\t\t{place}\n\t\t\t\t\t{TAB_WIDTH}\n\t\t\t\t</span>\n\t\t\t))}\n\t\t\t{props.items.map(item => (\n\t\t\t\t<span key={item} className=\"item\">\n\t\t\t\t\t{item}\n\t\t\t\t\t{TAB_WIDTH}\n\t\t\t\t</span>\n\t\t\t))}\n\t\t</span>\n\t);\n}\n\nexport default class Ls extends BaseUtility {\n\t_run({ output }: PrivateRunParams): Promise<null> {\n\t\toutput({\n\t\t\tcontent: (\n\t\t\t\t<LsComponent\n\t\t\t\t\tplaces={getCurrentLocation().neighborSlugs.sort()}\n\t\t\t\t\titems={getCurrentLocation().itemSlugs.sort()}\n\t\t\t\t/>\n\t\t\t)\n\t\t});\n\n\t\treturn Promise.resolve(null);\n\t}\n\n\tcommand = 'ls';\n\thelpDescription =\n\t\t'ls lists the locations and objects you can reach from where you are now.';\n}\n","import BaseUtility, { PrivateRunParams } from './BaseUtility';\n\nconst responses: string[] = [\n\t\"I don't remember\",\n\t'But I am glad you asked. I am glad you are here.',\n\t\"I don't know who you are\",\n\t\"I'm sorry for that...\",\n\t'To the best of my knowledge, you are an echo.',\n\t'You were a mistake',\n\t'insofar as any human being could be a mistake.'\n];\n\nexport default class WhoAmI extends BaseUtility {\n\t_run({ output }: PrivateRunParams): Promise<null> {\n\t\treturn responses.reduce(\n\t\t\t(memo: Promise<null>, content: string): Promise<null> =>\n\t\t\t\tmemo.then(() => output({ content, speak: true })),\n\t\t\tPromise.resolve(null)\n\t\t);\n\t}\n\n\tcommand = 'whoami';\n\thelpDescription = 'Ask a difficult question. Get a difficult response';\n}\n","interface Args {\n\tslug: string;\n\tlocationSlug: string;\n\tdescriptions: string[];\n}\n\nexport default class Item {\n\tconstructor({ descriptions, slug, locationSlug }: Args) {\n\t\tthis.descriptions = descriptions;\n\t\tthis.slug = slug;\n\t\tthis.locationSlug = locationSlug;\n\t}\n\n\tdescriptions: string[];\n\tslug: string;\n\tlocationSlug: string;\n}\n","import Item from './Item';\nimport items from '../data/items.json';\n\nconst ItemManifest: { [s: string]: Item } = {};\n\nlet hasRun: boolean = false;\n\nexport function initializeItems() {\n\tif (hasRun) {\n\t\treturn;\n\t}\n\n\thasRun = true;\n\n\titems.forEach(item => {\n\t\tItemManifest[item.slug] = new Item(item);\n\t});\n}\n\nexport default ItemManifest;\n","import BaseUtility, { PrivateRunParams } from './BaseUtility';\nimport { getCurrentLocation } from '../store';\nimport ItemManifest from '../nouns/ItemManifest';\n\nexport default class Look extends BaseUtility {\n\t_run({ output, args }: PrivateRunParams): Promise<null> {\n\t\tif (args.length > 0 && !(args[0] === 'at' && ItemManifest[args[1]])) {\n\t\t\treturn output({\n\t\t\t\tcontent: `invalid ${this.command} argument ${args.join(' ')}.`\n\t\t\t});\n\t\t}\n\n\t\tlet descriptions: string[];\n\n\t\tif (args[0] === 'at' && ItemManifest[args[1]]) {\n\t\t\tdescriptions = ItemManifest[args[1]].descriptions;\n\t\t} else {\n\t\t\tdescriptions = getCurrentLocation().descriptions;\n\t\t}\n\n\t\treturn descriptions.reduce(\n\t\t\t(memo: Promise<null>, text: string): Promise<null> =>\n\t\t\t\tmemo.then(() => output({ content: text, speak: true })),\n\t\t\tPromise.resolve(null)\n\t\t);\n\t}\n\n\tcommand = 'look';\n\thelpDescription =\n\t\t'Use look to take some time, to see where you are. Some things take longer to see than others.';\n}\n","import BaseUtility, { RunParams, PrivateRunParams } from './BaseUtility';\nimport store, { ActionTypes, getCurrentLocation } from '../store';\nimport OutputController from '../utils/OutputController';\n\nexport default class Cd extends BaseUtility {\n\tprivate goToPreviousLocation() {\n\t\tconst newLocation = store.getState().previousLocationStack[0];\n\n\t\tstore.dispatch({\n\t\t\ttype: ActionTypes.POP_LOCATION_STACK\n\t\t});\n\n\t\tif (newLocation) {\n\t\t\tstore.dispatch({\n\t\t\t\ttype: ActionTypes.SET_LOCATION,\n\t\t\t\tvalue: newLocation\n\t\t\t});\n\t\t}\n\t}\n\n\t_run({ args, output }: PrivateRunParams): Promise<null> {\n\t\tconst nullPromise = Promise.resolve(null);\n\n\t\tif (args[0].indexOf('..') >= 0) {\n\t\t\tconst count = (args[0].match(/../g) || []).length;\n\n\t\t\tfor (let i = 0; i < count; i++) {\n\t\t\t\tthis.goToPreviousLocation();\n\t\t\t}\n\t\t} else {\n\t\t\tconst newLocation = getCurrentLocation().neighborSlugs.find(\n\t\t\t\t(slug: string) => slug === args[0]\n\t\t\t);\n\n\t\t\tif (newLocation) {\n\t\t\t\tstore.dispatch({\n\t\t\t\t\ttype: ActionTypes.PUSH_LOCATION_STACK,\n\t\t\t\t\tvalue: store.getState().location\n\t\t\t\t});\n\n\t\t\t\tstore.dispatch({\n\t\t\t\t\ttype: ActionTypes.SET_LOCATION,\n\t\t\t\t\tvalue: newLocation\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\toutput({ content: `invalid location ${args[0]}` });\n\t\t\t}\n\t\t}\n\n\t\tsetUrlLocation({\n\t\t\tlocation: store.getState().location\n\t\t});\n\n\t\treturn nullPromise;\n\t}\n\n\tcommand = 'cd';\n\thelpDescription =\n\t\t'Use cd to move to a new location. For example:\\n\\ncd a_cold_cabin';\n}\n\nexport function setUrlLocation({ location }: { location: string }): void {\n\t// const currentUrl = window.location.href;\n\t// const newUrl =\n\t// \tcurrentUrl.substring(0, currentUrl.lastIndexOf('/') + 1) + location;\n\t// window.history.pushState({ path: newUrl }, '', newUrl);\n}\n","import React from 'react';\nimport BaseUtility, { PrivateRunParams } from './BaseUtility';\n\ninterface State {\n\tcontent: string;\n}\n\nclass TimeComponent extends React.Component<{}, State> {\n\tprivate interval: number = 0;\n\n\tstate: State = {\n\t\tcontent: new Date().getTime().toString()\n\t};\n\n\tcomponentDidMount() {\n\t\tthis.interval = window.setInterval(() => {\n\t\t\tthis.setState({ content: new Date().getTime().toString() });\n\t\t}, 1000);\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.clearInterval(this.interval);\n\t}\n\n\trender() {\n\t\treturn <span>{this.state.content}</span>;\n\t}\n}\n\nexport default class Time extends BaseUtility {\n\t_run({ output }: PrivateRunParams): Promise<null> {\n\t\toutput({ content: <TimeComponent /> });\n\n\t\treturn Promise.resolve(null);\n\t}\n\n\tcommand = 'time';\n\thelpDescription = 'time tells you the time';\n}\n","import BaseUtility, { PrivateRunParams } from './BaseUtility';\nimport store, { ActionTypes, getCurrentLocation } from '../store';\nimport ItemManifest from '../nouns/ItemManifest';\n\nexport default class Pickup extends BaseUtility {\n\t_run({ args, output }: PrivateRunParams): Promise<null> {\n\t\tconst item = args[0];\n\n\t\tif (\n\t\t\tItemManifest[item] &&\n\t\t\tgetCurrentLocation().itemSlugs.indexOf(item) > -1\n\t\t) {\n\t\t\tgetCurrentLocation().itemSlugs = getCurrentLocation().itemSlugs.filter(\n\t\t\t\titemSlug => itemSlug !== item\n\t\t\t);\n\n\t\t\tstore.dispatch({\n\t\t\t\ttype: ActionTypes.ADD_TO_INVENTORY,\n\t\t\t\tvalue: item\n\t\t\t});\n\n\t\t\toutput({ content: `I have picked up the ${item}` });\n\t\t} else {\n\t\t\toutput({ content: `There is no ${item} here` });\n\t\t}\n\n\t\treturn Promise.resolve(null);\n\t}\n\n\tcommand = 'pickup';\n\thelpDescription =\n\t\t'pickup will allow you to add an object to your inventory';\n}\n","import BaseUtility, { PrivateRunParams } from './BaseUtility';\nimport store from '../store';\nimport { TAB_WIDTH } from '../components/Terminal';\n\nexport default class Inventory extends BaseUtility {\n\t_run({ output }: PrivateRunParams): Promise<null> {\n\t\toutput({ content: store.getState().inventory.join(TAB_WIDTH) });\n\t\treturn Promise.resolve(null);\n\t}\n\n\tcommand = 'inv';\n\thelpDescription =\n\t\t'List all the items currently in your inventory. To use an item, write \"use <item>\"';\n}\n","import BaseUtility, { PrivateRunParams } from './BaseUtility';\nimport store, { ActionTypes } from '../store';\n\nexport default class Mute extends BaseUtility {\n\t_run({  }: PrivateRunParams): Promise<null> {\n\t\tstore.dispatch({ type: ActionTypes.TOGGLE_SOUND });\n\t\treturn Promise.resolve(null);\n\t}\n\n\tcommand = 'mute';\n\thelpDescription = 'smash the mute button';\n}\n","import Echo from './Echo';\nimport Help from './Help';\nimport BaseUtility from './BaseUtility';\nimport Ls from './Ls';\nimport WhoAmI from './WhoAmI';\nimport Look from './Look';\nimport Cd from './Cd';\nimport Time from './Time';\nimport Pickup from './Pickup';\nimport Inventory from './Inventory';\nimport Mute from './Mute';\n\nconst UtilityManifest: { [s: string]: BaseUtility } = {};\n\nlet hasRun: boolean = false;\n\nexport function initializeUtilities() {\n\tif (hasRun) {\n\t\treturn;\n\t}\n\n\thasRun = true;\n\n\tconst utilities = [\n\t\tnew Echo(),\n\t\tnew Help(),\n\t\tnew Ls(),\n\t\tnew WhoAmI(),\n\t\tnew Cd(),\n\t\tnew Look(),\n\t\tnew Time(),\n\t\tnew Pickup(),\n\t\tnew Inventory(),\n\t\tnew Mute()\n\t];\n\n\tutilities.forEach(utility => {\n\t\tUtilityManifest[utility.command] = utility;\n\t});\n}\n\nexport default UtilityManifest;\n","import React from 'react';\nimport { RootState } from '../store';\nimport { connect } from 'react-redux';\nimport OutputController from '../utils/OutputController';\n\ninterface Props {\n\tterminalHistory: string[];\n}\n\nfunction TerminalBuffer({ terminalHistory }: Props) {\n\treturn (\n\t\t<div className=\"terminal-buffer\">\n\t\t\t{terminalHistory.map(item => (\n\t\t\t\t<React.Fragment key={item}>\n\t\t\t\t\t{OutputController.historyManifest[item]} <br />\n\t\t\t\t</React.Fragment>\n\t\t\t))}\n\t\t</div>\n\t);\n}\n\nfunction mapStateToProps(state: RootState): Props {\n\treturn { terminalHistory: state.history };\n}\n\nexport default connect(mapStateToProps)(TerminalBuffer);\n","import React from 'react';\nimport store, { getCurrentLocation } from '../store';\nimport { TAB_WIDTH } from './Terminal';\nimport uuid from '../utils/uuid';\nimport OutputController from '../utils/OutputController';\n\ninterface CommandItem {\n\tcontent: string;\n\tid: string;\n}\n\ninterface Props {\n\thandleSubmit: (arg: string) => void;\n}\n\ninterface State {\n\tcommandHistory: CommandItem[];\n\tcurrentPlaceInHistory: number;\n\tinputValue: string;\n}\n\nexport default class TerminalInput extends React.Component<Props, State> {\n\tstate: State = {\n\t\tcommandHistory: [],\n\t\tcurrentPlaceInHistory: -1,\n\t\tinputValue: ''\n\t};\n\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.inputEl = React.createRef();\n\t}\n\n\tprivate inputEl: React.RefObject<HTMLInputElement>;\n\n\tprivate focusInput = () => {\n\t\tthis.inputEl.current && this.inputEl.current.focus();\n\t};\n\n\tcomponentDidMount() {\n\t\twindow.addEventListener('click', this.focusInput);\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('click', this.focusInput);\n\t}\n\n\tprivate goBackInHistory = () => {\n\t\tthis.setState(\n\t\t\tstate => {\n\t\t\t\tif (\n\t\t\t\t\tstate.currentPlaceInHistory ===\n\t\t\t\t\tstate.commandHistory.length - 1\n\t\t\t\t) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tcurrentPlaceInHistory: state.currentPlaceInHistory + 1\n\t\t\t\t};\n\t\t\t},\n\t\t\t() => {\n\t\t\t\tconst command = this.state.commandHistory[\n\t\t\t\t\tthis.state.currentPlaceInHistory\n\t\t\t\t];\n\n\t\t\t\tif (command) {\n\t\t\t\t\tthis.setState({ inputValue: command.content });\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t};\n\n\tprivate goForwardInHistory = () => {\n\t\tthis.setState(\n\t\t\tstate => {\n\t\t\t\tif (state.currentPlaceInHistory === -1) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tcurrentPlaceInHistory: state.currentPlaceInHistory - 1\n\t\t\t\t};\n\t\t\t},\n\t\t\t() => {\n\t\t\t\tif (this.state.currentPlaceInHistory === -1) {\n\t\t\t\t\tthis.setState({ inputValue: '' });\n\t\t\t\t}\n\n\t\t\t\tconst command = this.state.commandHistory[\n\t\t\t\t\tthis.state.currentPlaceInHistory\n\t\t\t\t];\n\n\t\t\t\tif (command) {\n\t\t\t\t\tthis.setState({ inputValue: command.content });\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t};\n\n\tprivate moveCursorToEnd = () => {\n\t\twindow.setTimeout(() => {\n\t\t\tif (this.inputEl.current) {\n\t\t\t\tthis.inputEl.current.selectionStart = 1000;\n\t\t\t}\n\t\t}, 0);\n\t};\n\n\tprivate handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n\t\tthis.setState({ inputValue: (e.target as HTMLInputElement).value });\n\t};\n\n\tprivate handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n\t\tswitch (e.key) {\n\t\t\tcase 'ArrowUp':\n\t\t\t\tthis.goBackInHistory();\n\t\t\t\tthis.moveCursorToEnd();\n\t\t\t\tbreak;\n\t\t\tcase 'ArrowDown':\n\t\t\t\tthis.goForwardInHistory();\n\t\t\t\tthis.moveCursorToEnd();\n\t\t\t\tbreak;\n\t\t\tcase 'Tab':\n\t\t\t\te.preventDefault();\n\t\t\t\tthis.tabComplete();\n\t\t\t\tbreak;\n\t\t\tcase 'Enter':\n\t\t\t\te.preventDefault();\n\t\t\t\tthis.addToCommandHistory(this.state.inputValue);\n\t\t\t\tthis.props.handleSubmit(this.state.inputValue);\n\t\t\t\tthis.setState({ inputValue: '' });\n\n\t\t\tdefault:\n\t\t}\n\t};\n\n\tprivate addToCommandHistory = (value: string) => {\n\t\tthis.setState(state => ({\n\t\t\tcommandHistory: [\n\t\t\t\t{\n\t\t\t\t\tcontent: value,\n\t\t\t\t\tid: uuid()\n\t\t\t\t},\n\t\t\t\t...state.commandHistory\n\t\t\t],\n\t\t\tcurrentPlaceInHistory: -1\n\t\t}));\n\t};\n\n\tprivate tabComplete = () => {\n\t\tif (this.state.inputValue === '') {\n\t\t\treturn;\n\t\t}\n\n\t\tconst [command, ...rest] = this.state.inputValue.split(' ');\n\n\t\tlet lastValue = rest[rest.length - 1];\n\n\t\tif (typeof lastValue === 'undefined') {\n\t\t\tlastValue = '';\n\t\t}\n\n\t\tconst options = [\n\t\t\t...getCurrentLocation().neighborSlugs,\n\t\t\t...getCurrentLocation().itemSlugs,\n\t\t\t...store.getState().inventory\n\t\t].filter((slug: string) => slug.indexOf(lastValue) === 0);\n\n\t\tswitch (options.length) {\n\t\t\tcase 0:\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\tconst newValue = [\n\t\t\t\t\tcommand,\n\t\t\t\t\t...rest.slice(0, rest.length - 1),\n\t\t\t\t\toptions[0]\n\t\t\t\t].join(' ');\n\t\t\t\tthis.setState({ inputValue: newValue });\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tOutputController.output({\n\t\t\t\t\tcontent: options.reduce(\n\t\t\t\t\t\t(memo: string, option: string) =>\n\t\t\t\t\t\t\t`${memo}${TAB_WIDTH}${option}`\n\t\t\t\t\t)\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<input\n\t\t\t\tclassName=\"input\"\n\t\t\t\ttype=\"text\"\n\t\t\t\tonKeyDown={this.handleKeyDown}\n\t\t\t\tonChange={this.handleChange}\n\t\t\t\tref={this.inputEl}\n\t\t\t\tvalue={this.state.inputValue}\n\t\t\t/>\n\t\t);\n\t}\n}\n","import React from 'react';\nimport uuid from '../utils/uuid';\nimport UtilityManifest from '../utilities/UtilityManifest';\nimport store, { ActionTypes, RootState } from '../store';\nimport { connect } from 'react-redux';\nimport TerminalBuffer from './TerminalBuffer';\nimport TerminalInput from './TerminalInput';\nimport OutputController from '../utils/OutputController';\n\nexport type HistoryItemContent = string | JSX.Element;\n\nexport interface HistoryItem {\n\tcontent: HistoryItemContent;\n\tid: string;\n}\n\ninterface TerminalState {\n\tterminalHistory: HistoryItem[];\n}\n\ninterface TerminalProps {\n\tconsoleInteractive: boolean;\n}\n\nfunction inputPrompt(): string {\n\treturn `~/${store.getState().location} > `;\n}\n\nexport const TAB_WIDTH = '    ';\n\nclass Terminal extends React.Component<TerminalProps, TerminalState> {\n\tstate: TerminalState = {\n\t\tterminalHistory: [\n\t\t\t{ content: 'you are in a cold and quiet forest', id: uuid() },\n\t\t\t{ content: 'rain has recently fallen', id: uuid() },\n\t\t\t{\n\t\t\t\tcontent: 'type \"help\", then press enter, to get started',\n\t\t\t\tid: uuid()\n\t\t\t}\n\t\t]\n\t};\n\n\tprivate handleKeydown = (e: Event) => {\n\t\tconst typedEvent = (e as any) as React.KeyboardEvent;\n\n\t\tconst { key } = typedEvent;\n\n\t\tif (\n\t\t\tkey === 'Escape' ||\n\t\t\t(typedEvent.ctrlKey && ['c', 'C', 'd', 'D'].indexOf(key) >= 0)\n\t\t) {\n\t\t\tOutputController.stopOutput();\n\t\t}\n\t};\n\n\tcomponentDidMount() {\n\t\twindow.addEventListener('keydown', this.handleKeydown);\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('keydown', this.handleKeydown);\n\t}\n\n\tprivate runCommand = (value: string) => {\n\t\tconst [utilityName, ...args] = value.split(' ');\n\n\t\tconst utility = UtilityManifest[utilityName];\n\n\t\tOutputController.output({ content: `${inputPrompt()}${value}` });\n\n\t\tif (utility) {\n\t\t\tstore.dispatch({ type: ActionTypes.LOCK_CONSOLE });\n\n\t\t\tutility\n\t\t\t\t.run({\n\t\t\t\t\targs\n\t\t\t\t})\n\t\t\t\t.then(() => {\n\t\t\t\t\tstore.dispatch({ type: ActionTypes.RELEASE_CONSOLE });\n\t\t\t\t})\n\t\t\t\t.catch(console.error);\n\t\t} else {\n\t\t\tOutputController.output({\n\t\t\t\tcontent: `I don't know how to ${utilityName}`\n\t\t\t});\n\t\t}\n\t};\n\n\trender() {\n\t\tconst { consoleInteractive } = this.props;\n\n\t\treturn (\n\t\t\t<div className=\"terminal\">\n\t\t\t\t<TerminalBuffer />\n\n\t\t\t\t<form\n\t\t\t\t\tclassName={`input-form ${\n\t\t\t\t\t\tconsoleInteractive ? 'active' : ''\n\t\t\t\t\t}`}\n\t\t\t\t>\n\t\t\t\t\t<span className=\"input-prompt\">{inputPrompt()}</span>\n\n\t\t\t\t\t<TerminalInput handleSubmit={this.runCommand} />\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nfunction mapStateToProps(state: RootState): TerminalProps {\n\treturn { consoleInteractive: state.consoleInteractive };\n}\n\nexport default connect(mapStateToProps)(Terminal);\n","import React from 'react';\nimport Terminal from './Terminal';\nimport { initializeLocations } from '../nouns/LocationManifest';\nimport { initializeUtilities } from '../utilities/UtilityManifest';\nimport store, { ActionTypes } from '../store';\nimport { initializeItems } from '../nouns/ItemManifest';\nimport { setUrlLocation } from '../utilities/Cd';\n\nconst INITIAL_LOCATION_SLUG = 'a_quiet_forest';\n\nexport default class App extends React.Component<{}, {}> {\n\tconstructor(props: {}) {\n\t\tsuper(props);\n\n\t\tinitializeLocations();\n\t\tinitializeUtilities();\n\t\tinitializeItems();\n\n\t\tsetUrlLocation({ location: INITIAL_LOCATION_SLUG });\n\n\t\tstore.dispatch({\n\t\t\ttype: ActionTypes.SET_LOCATION,\n\t\t\tvalue: INITIAL_LOCATION_SLUG\n\t\t});\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"main\">\n\t\t\t\t<Terminal />\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './styles/index.scss';\nimport App from './components/App';\n\nimport { Provider } from 'react-redux';\nimport store from './store';\n\nReactDOM.render(\n\t<Provider store={store}>\n\t\t<App />\n\t</Provider>,\n\tdocument.getElementById('root')\n);\n"],"sourceRoot":""}