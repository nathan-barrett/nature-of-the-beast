{"version":3,"sources":["nouns/Location.ts","nouns/LocationManifest.ts","store.ts","utils/SpeechUtilities.ts","utils/uuid.ts","utils/OutputController.ts","utilities/BaseUtility.ts","utilities/Echo.ts","utilities/Help.ts","utilities/Ls.tsx","utilities/WhoAmI.ts","nouns/Item.ts","nouns/ItemManifest.ts","utilities/Look.ts","utilities/Cd.ts","utilities/Time.tsx","utilities/Pickup.ts","utilities/Inventory.ts","utilities/Mute.ts","utilities/Clear.ts","utilities/UtilityManifest.ts","components/TerminalBuffer.tsx","components/TerminalInput.tsx","components/Terminal.tsx","components/App.tsx","index.tsx"],"names":["Location","_ref","descriptions","slug","Object","classCallCheck","this","itemSlugs","neighborSlugs","LocationManifest","hasRun","ActionTypes","initialState","location","previousLocationStack","consoleInteractive","inventory","history","soundOn","store","createStore","state","arguments","length","undefined","action","type","SET_LOCATION","objectSpread","value","PUSH_LOCATION_STACK","concat","toConsumableArray","POP_LOCATION_STACK","slice","SET_LOCATION_STACK","LOCK_CONSOLE","RELEASE_CONSOLE","ADD_TO_INVENTORY","PUSH_HISTORY","CLEAR_HISTORY","TOGGLE_SOUND","getCurrentLocation","getState","voices","speechSynthesis","getVoices","uuid","a","Math","random","toString","replace","OutputController","item","historyManifest","id","content","dispatch","pushToStoreHistory","_historyManifest","revoked","revocableOutputter","revoke","output","args","Promise","resolve","revocableOutputters","push","speechPromise","speak","text","utterance","SpeechSynthesisUtterance","pitch","rate","volume","voice","filter","name","window","onend","setTimeout","say","pushItem","forEach","outputter","revokeOutputters","cancel","BaseUtility","command","aliases","helpDescription","_params","getRevocableOutputter","_run","Echo","join","Help","util","UtilityManifest","keys","LsComponent","props","react_default","createElement","places","map","place","key","className","TAB_WIDTH","items","Ls","sort","responses","WhoAmI","reduce","memo","then","Item","locationSlug","takeable","ItemManifest","Look","INVALID_LOCATION","Cd","goToLocation","newLocation","find","code","message","_this","goToPreviousLocation","getTabCompleteOptions","path","locations","split","locationChain","splice","finalFragment","locationChainValid","finalLocationInChain","options","indexOf","i","arr","_store$getState","initialLocation","initialStack","e","setUrlLocation","_ref2","hash","TimeComponent","interval","Date","getTime","_this2","setInterval","setState","clearInterval","React","Component","Time","Time_TimeComponent","Pickup","itemSlug","Inventory","Mute","Clear","objectDestructuringEmpty","clearHistory","ExtendedUtilityManifest","connect","terminalHistory","itemId","TerminalInput","possibleConstructorReturn","getPrototypeOf","call","commandHistory","currentPlaceInHistory","inputValue","focusInput","inputEl","current","focus","goBackInHistory","goForwardInHistory","moveCursorToEnd","selectionStart","handleChange","target","handleKeyDown","preventDefault","tabComplete","addToCommandHistory","handleSubmit","_this$state$inputValu","_this$state$inputValu2","toArray","rest","lastValue","utility","newValue","createRef","addEventListener","removeEventListener","onKeyDown","onChange","ref","inputPrompt","Terminal","handleKeydown","typedEvent","ctrlKey","stopOutput","runCommand","_value$split","_value$split2","utilityName","run","catch","console","error","components_TerminalBuffer","TerminalInput_TerminalInput","INITIAL_LOCATION_SLUG","App","neighbors","_neighbors","slicedToArray","neighbor1","neighbor2","oneWay","alias","components_Terminal","ReactDOM","render","es","App_App","document","getElementById"],"mappings":"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","file":"static/js/main.b95e2791.chunk.js","sourcesContent":["interface Args {\n\tslug: string;\n\tdescriptions: string[];\n}\n\nexport default class Location {\n\tconstructor({ descriptions, slug }: Args) {\n\t\tthis.descriptions = descriptions;\n\t\tthis.slug = slug;\n\t}\n\n\tdescriptions: string[];\n\tslug: string;\n\titemSlugs: string[] = [];\n\tneighborSlugs: string[] = [];\n}\n","import Location from './Location';\n\nimport locations from '../data/locations.json';\nimport neighbors from '../data/neighbors.json';\nimport items from '../data/items.json';\n\ninterface NeighborOptions {\n\toneWay: boolean;\n}\ntype Neighbors = [string, string, NeighborOptions];\n\nconst LocationManifest: { [s: string]: Location } = {};\n\nlet hasRun: boolean = false;\n\nexport function initializeLocations() {\n\tif (hasRun) {\n\t\treturn;\n\t}\n\n\thasRun = true;\n\n\tlocations.forEach(location => {\n\t\tLocationManifest[location.slug] = new Location(location);\n\t});\n\n\t(neighbors as Neighbors[]).forEach((neighbors: Neighbors) => {\n\t\tconst [neighbor1, neighbor2, { oneWay }] = neighbors;\n\n\t\tif (!LocationManifest[neighbor1]) {\n\t\t\tthrow `${neighbor1} is an invalid location`;\n\t\t}\n\n\t\tif (!LocationManifest[neighbor2]) {\n\t\t\tthrow `${neighbor2} is an invalid location`;\n\t\t}\n\n\t\tLocationManifest[neighbor1].neighborSlugs.push(neighbor2);\n\n\t\tif (!oneWay) {\n\t\t\tLocationManifest[neighbor2].neighborSlugs.push(neighbor1);\n\t\t}\n\t});\n\n\titems.forEach(item => {\n\t\tif (!LocationManifest[item.locationSlug]) {\n\t\t\tthrow `${item.slug} has location ${\n\t\t\t\titem.locationSlug\n\t\t\t}, which does not exist`;\n\t\t}\n\n\t\tLocationManifest[item.locationSlug].itemSlugs.push(item.slug);\n\t});\n}\n\nexport default LocationManifest;\n","import { createStore } from 'redux';\nimport Location from './nouns/Location';\nimport LocationManifest from './nouns/LocationManifest';\nimport { HistoryItem } from './components/Terminal';\n\nexport interface RootState {\n\tlocation: string;\n\tpreviousLocationStack: string[];\n\tconsoleInteractive: boolean;\n\tinventory: string[];\n\thistory: string[];\n\tsoundOn: boolean;\n}\n\nexport enum ActionTypes {\n\tSET_LOCATION = 'SET_LOCATION',\n\tPOP_LOCATION_STACK = 'POP_LOCATION_STACK',\n\tPUSH_LOCATION_STACK = 'PUSH_LOCATION_STACK',\n\tSET_LOCATION_STACK = 'SET_LOCATION_STACK',\n\tLOCK_CONSOLE = 'LOCK_CONSOLE',\n\tRELEASE_CONSOLE = 'RELEASE_CONSOLE',\n\tADD_TO_INVENTORY = 'ADD_TO_INVENTORY',\n\tPUSH_HISTORY = 'PUSH_HISTORY',\n\tTOGGLE_SOUND = 'TOGGLE_SOUND',\n\tCLEAR_HISTORY = 'CLEAR_HISTORY'\n}\n\ninterface SetLocation {\n\ttype: ActionTypes.SET_LOCATION;\n\tvalue: string;\n}\n\ninterface PopLocationStack {\n\ttype: ActionTypes.POP_LOCATION_STACK;\n}\n\ninterface PushLocationStack {\n\ttype: ActionTypes.PUSH_LOCATION_STACK;\n\tvalue: string;\n}\n\ninterface SetLocationStack {\n\ttype: ActionTypes.SET_LOCATION_STACK;\n\tvalue: string[];\n}\n\ninterface LockConsole {\n\ttype: ActionTypes.LOCK_CONSOLE;\n}\n\ninterface ReleaseConsole {\n\ttype: ActionTypes.RELEASE_CONSOLE;\n}\n\ninterface AddToInventory {\n\ttype: ActionTypes.ADD_TO_INVENTORY;\n\tvalue: string;\n}\n\ninterface AddToHistory {\n\ttype: ActionTypes.PUSH_HISTORY;\n\tvalue: string;\n}\n\ninterface ClearHistory {\n\ttype: ActionTypes.CLEAR_HISTORY;\n}\n\ninterface ToggleSound {\n\ttype: ActionTypes.TOGGLE_SOUND;\n}\n\nconst initialState: RootState = {\n\tlocation: '',\n\tpreviousLocationStack: [],\n\tconsoleInteractive: true,\n\tinventory: [],\n\thistory: [],\n\tsoundOn: true\n};\n\ntype CombinedAction =\n\t| SetLocation\n\t| PopLocationStack\n\t| PushLocationStack\n\t| SetLocationStack\n\t| LockConsole\n\t| ReleaseConsole\n\t| AddToInventory\n\t| AddToHistory\n\t| ToggleSound\n\t| ClearHistory;\n\nfunction reducer(\n\tstate: RootState = initialState,\n\taction: CombinedAction\n): RootState {\n\tswitch (action.type) {\n\t\tcase ActionTypes.SET_LOCATION:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tlocation: action.value\n\t\t\t};\n\t\tcase ActionTypes.PUSH_LOCATION_STACK:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tpreviousLocationStack: [\n\t\t\t\t\taction.value,\n\t\t\t\t\t...state.previousLocationStack\n\t\t\t\t]\n\t\t\t};\n\t\tcase ActionTypes.POP_LOCATION_STACK:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tpreviousLocationStack: state.previousLocationStack.slice(1)\n\t\t\t};\n\t\tcase ActionTypes.SET_LOCATION_STACK:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tpreviousLocationStack: action.value\n\t\t\t};\n\t\tcase ActionTypes.LOCK_CONSOLE:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tconsoleInteractive: false\n\t\t\t};\n\t\tcase ActionTypes.RELEASE_CONSOLE:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tconsoleInteractive: true\n\t\t\t};\n\t\tcase ActionTypes.ADD_TO_INVENTORY:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tinventory: [...state.inventory, action.value]\n\t\t\t};\n\t\tcase ActionTypes.PUSH_HISTORY:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\thistory: [...state.history, action.value]\n\t\t\t};\n\t\tcase ActionTypes.CLEAR_HISTORY:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\thistory: []\n\t\t\t};\n\t\tcase ActionTypes.TOGGLE_SOUND:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tsoundOn: !state.soundOn\n\t\t\t};\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\n\nexport function pushToStoreHistory(item: HistoryItem) {\n\tstore.dispatch({\n\t\ttype: ActionTypes.PUSH_HISTORY,\n\t\tvalue: item.id\n\t});\n}\n\nexport function clearStoreHistory() {\n\tstore.dispatch({ type: ActionTypes.CLEAR_HISTORY });\n}\n\nconst store = createStore(reducer);\n\nexport default store;\n\nexport const getCurrentLocation = (): Location =>\n\tLocationManifest[store.getState().location];\n","import store from '../store';\n\nconst voices = speechSynthesis.getVoices();\n\nexport default function say(text: string): Promise<null> {\n\tif (!store.getState().soundOn) {\n\t\treturn Promise.resolve(null);\n\t}\n\n\tconst utterance = new SpeechSynthesisUtterance(text);\n\n\tutterance.pitch = 0.8;\n\tutterance.rate = 0.9;\n\tutterance.volume = 1;\n\n\tif (text[0] === '\"' && text[text.length - 1] === '\"') {\n\t\tutterance.voice =\n\t\t\tvoices.filter(voice => voice.name === 'Karen')[0] || voices[0];\n\t}\n\n\twindow.speechSynthesis.speak(utterance);\n\n\treturn new Promise(resolve => {\n\t\tutterance.onend = () => {\n\t\t\twindow.setTimeout(resolve, 300);\n\t\t};\n\t});\n}\n\nexport function cancelSpeech(): void {\n\twindow.speechSynthesis.cancel();\n}\n","// simplest UUID implementation\n// https://gist.github.com/jed/982883\n\nexport default function uuid(a?: number): string {\n\treturn a\n\t\t? (a ^ ((Math.random() * 16) >> (a / 4))).toString(16)\n\t\t: (([1e7] as any) + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, uuid);\n}\n","import { HistoryItemContent, HistoryItem } from '../components/Terminal';\nimport say, { cancelSpeech } from './SpeechUtilities';\nimport uuid from './uuid';\nimport store, {\n\tActionTypes,\n\tclearStoreHistory,\n\tpushToStoreHistory\n} from '../store';\n\nexport type IOutputterArgs = {\n\tcontent: HistoryItemContent;\n\tspeak?: boolean;\n};\n\nexport type OutputterFunction = (arg1: IOutputterArgs) => Promise<null>;\n\ninterface RevocableOutputter {\n\trevoke: () => void;\n\toutput: OutputterFunction;\n}\n\nexport default class OutputController {\n\t// Make the public manifest a readonly clone of the mutable private manifest\n\tprivate static _historyManifest: { [key: string]: HistoryItemContent } = {};\n\tstatic readonly historyManifest = OutputController._historyManifest;\n\n\tprivate static revocableOutputters: RevocableOutputter[] = [];\n\n\tprivate static pushItem(item: HistoryItem) {\n\t\tOutputController.historyManifest[item.id] = item.content;\n\t\tpushToStoreHistory(item);\n\t}\n\n\tstatic clearHistory() {\n\t\tOutputController._historyManifest = {};\n\t\tclearStoreHistory();\n\t}\n\n\tstatic getRevocableOutputter(): OutputterFunction {\n\t\tlet revoked = false;\n\n\t\tconst revocableOutputter = {\n\t\t\trevoke: () => {\n\t\t\t\trevoked = true;\n\t\t\t},\n\t\t\toutput: (args: IOutputterArgs) =>\n\t\t\t\trevoked ? Promise.resolve(null) : OutputController.output(args)\n\t\t};\n\n\t\tOutputController.revocableOutputters.push(revocableOutputter);\n\n\t\treturn revocableOutputter.output;\n\t}\n\n\tstatic output({ content, speak }: IOutputterArgs): Promise<null> {\n\t\tlet speechPromise = null;\n\n\t\tif (speak) {\n\t\t\tif (typeof content !== 'string') {\n\t\t\t\tthrow 'cannot \"speak\" a component';\n\t\t\t}\n\t\t\tspeechPromise = say(content);\n\t\t}\n\n\t\tconst item: HistoryItem = { id: uuid(), content };\n\t\tOutputController.pushItem(item);\n\n\t\treturn speechPromise ? speechPromise : Promise.resolve(null);\n\t}\n\n\tprivate static revokeOutputters() {\n\t\tOutputController.revocableOutputters.forEach(outputter => {\n\t\t\toutputter.revoke();\n\t\t});\n\n\t\tthis.revocableOutputters = [];\n\t}\n\n\tstatic stopOutput() {\n\t\tthis.revokeOutputters();\n\t\tcancelSpeech();\n\t\tstore.dispatch({ type: ActionTypes.RELEASE_CONSOLE });\n\t}\n}\n","import OutputController, { OutputterFunction } from '../utils/OutputController';\n\nexport interface RunParams {\n\targs: string[];\n}\n\nexport interface PrivateRunParams {\n\targs: string[];\n\toutput: OutputterFunction;\n}\n\nexport default class BaseUtility {\n\trun(_params: RunParams): Promise<null> {\n\t\tconst output = OutputController.getRevocableOutputter();\n\n\t\treturn this._run({ ..._params, output });\n\t}\n\n\t_run(_params: PrivateRunParams): Promise<null> {\n\t\tthrow 'not implemented';\n\t}\n\n\tgetTabCompleteOptions?: (arg: string) => string[];\n\n\tcommand: string = '';\n\taliases: string[] = [];\n\thelpDescription: string = '';\n}\n","import BaseUtility, { PrivateRunParams } from './BaseUtility';\n\nexport default class Echo extends BaseUtility {\n\t_run({ args, output }: PrivateRunParams): Promise<null> {\n\t\toutput({ content: args.join(' ') });\n\t\treturn Promise.resolve(null);\n\t}\n\n\tcommand = 'echo';\n\thelpDescription =\n\t\t'Use echo to say something out loud. Example:\\n\\necho Is anyone there?';\n\taliases = ['say'];\n}\n","import BaseUtility, { PrivateRunParams } from './BaseUtility';\nimport { UtilityManifest } from './UtilityManifest';\n\nexport default class Help extends BaseUtility {\n\t_run({ output, args }: PrivateRunParams): Promise<null> {\n\t\tif (args.length >= 1) {\n\t\t\tconst util = UtilityManifest[args[0]];\n\t\t\tconst description = util\n\t\t\t\t? `${util.helpDescription}${\n\t\t\t\t\t\tutil.aliases.length > 0\n\t\t\t\t\t\t\t? `\\nAliases for this command are: ${util.aliases.join(\n\t\t\t\t\t\t\t\t\t', '\n\t\t\t\t\t\t\t  )}.`\n\t\t\t\t\t\t\t: ''\n\t\t\t\t  }`\n\t\t\t\t: `I don't know about ${args.join(' ')}.`;\n\n\t\t\toutput({ content: description });\n\t\t} else {\n\t\t\toutput({\n\t\t\t\tcontent: `You can interact with the story by typing a verb, optionally followed by some details.\\nFor example, type 'look' to observe where you are. Type 'look at thing' to take a closer look at that thing.\\nThe following verbs are available: ${Object.keys(\n\t\t\t\t\tUtilityManifest\n\t\t\t\t).join(\n\t\t\t\t\t', '\n\t\t\t\t)}.\\n\\nTo get more details for a verb, type e.g., \"help look\". This will also show you available aliases for that verb.\\n\\nTo stop a dialogue, press the escape key.`\n\t\t\t});\n\t\t}\n\n\t\treturn Promise.resolve(null);\n\t}\n\n\tcommand = 'help';\n\thelpDescription = 'Use help to make sense of the world.';\n}\n","import React from 'react';\n\nimport BaseUtility, { PrivateRunParams } from './BaseUtility';\nimport { getCurrentLocation } from '../store';\nimport { TAB_WIDTH } from '../components/Terminal';\n\ninterface Props {\n\titems: string[];\n\tplaces: string[];\n}\n\nfunction LsComponent(props: Props) {\n\treturn (\n\t\t<span>\n\t\t\t{props.places.map(place => (\n\t\t\t\t<span key={place} className=\"place\">\n\t\t\t\t\t{place}\n\t\t\t\t\t{TAB_WIDTH}\n\t\t\t\t</span>\n\t\t\t))}\n\t\t\t{props.items.map(item => (\n\t\t\t\t<span key={item} className=\"item\">\n\t\t\t\t\t{item}\n\t\t\t\t\t{TAB_WIDTH}\n\t\t\t\t</span>\n\t\t\t))}\n\t\t</span>\n\t);\n}\n\nexport default class Ls extends BaseUtility {\n\t_run({ output }: PrivateRunParams): Promise<null> {\n\t\toutput({\n\t\t\tcontent: (\n\t\t\t\t<LsComponent\n\t\t\t\t\tplaces={getCurrentLocation().neighborSlugs.sort()}\n\t\t\t\t\titems={getCurrentLocation().itemSlugs.sort()}\n\t\t\t\t/>\n\t\t\t)\n\t\t});\n\n\t\treturn Promise.resolve(null);\n\t}\n\n\tcommand = 'list';\n\taliases = ['ls'];\n\thelpDescription =\n\t\t'list the locations and objects you can reach from where you are now.';\n}\n","import BaseUtility, { PrivateRunParams } from './BaseUtility';\n\nconst responses: string[] = [\n\t\"I don't remember\",\n\t'But I am glad you asked. I am glad you are here.',\n\t\"I don't know who you are\",\n\t\"I'm sorry for that...\",\n\t'To the best of my knowledge, you are an echo.',\n\t'You were a mistake',\n\t'insofar as any human being could be a mistake.'\n];\n\nexport default class WhoAmI extends BaseUtility {\n\t_run({ output }: PrivateRunParams): Promise<null> {\n\t\treturn responses.reduce(\n\t\t\t(memo: Promise<null>, content: string): Promise<null> =>\n\t\t\t\tmemo.then(() => output({ content, speak: true })),\n\t\t\tPromise.resolve(null)\n\t\t);\n\t}\n\n\tcommand = 'whoami';\n\thelpDescription = 'Ask a difficult question. Get a difficult response';\n}\n","interface Args {\n\tslug: string;\n\tlocationSlug: string;\n\tdescriptions: string[];\n\ttakeable: boolean;\n}\n\nexport default class Item {\n\tconstructor({ descriptions, slug, locationSlug, takeable }: Args) {\n\t\tthis.descriptions = descriptions;\n\t\tthis.slug = slug;\n\t\tthis.locationSlug = locationSlug;\n\t\tthis.takeable = takeable;\n\t}\n\n\tdescriptions: string[];\n\tslug: string;\n\tlocationSlug: string;\n\ttakeable: boolean;\n}\n","import Item from './Item';\nimport items from '../data/items.json';\n\nconst ItemManifest: { [s: string]: Item } = {};\n\nlet hasRun: boolean = false;\n\nexport function initializeItems() {\n\tif (hasRun) {\n\t\treturn;\n\t}\n\n\thasRun = true;\n\n\titems.forEach(item => {\n\t\tItemManifest[item.slug] = new Item(item);\n\t});\n}\n\nexport default ItemManifest;\n","import BaseUtility, { PrivateRunParams } from './BaseUtility';\nimport { getCurrentLocation } from '../store';\nimport ItemManifest from '../nouns/ItemManifest';\n\nexport default class Look extends BaseUtility {\n\t_run({ output, args }: PrivateRunParams): Promise<null> {\n\t\tif (args.length > 0 && !(args[0] === 'at' && ItemManifest[args[1]])) {\n\t\t\treturn output({\n\t\t\t\tcontent: `invalid ${this.command} argument ${args.join(' ')}.`\n\t\t\t});\n\t\t}\n\n\t\tlet descriptions: string[];\n\n\t\tif (args[0] === 'at' && ItemManifest[args[1]]) {\n\t\t\tdescriptions = ItemManifest[args[1]].descriptions;\n\t\t} else {\n\t\t\tdescriptions = getCurrentLocation().descriptions;\n\t\t}\n\n\t\treturn descriptions.reduce(\n\t\t\t(memo: Promise<null>, text: string): Promise<null> =>\n\t\t\t\tmemo.then(() => output({ content: text, speak: true })),\n\t\t\tPromise.resolve(null)\n\t\t);\n\t}\n\n\tcommand = 'look';\n\taliases = ['l'];\n\thelpDescription = 'Use look to take a good look around.';\n}\n","import BaseUtility, { PrivateRunParams } from './BaseUtility';\nimport store, { ActionTypes, getCurrentLocation } from '../store';\nimport LocationManifest from '../nouns/LocationManifest';\n\nconst INVALID_LOCATION = 'INVALID_LOCATION';\n\nexport default class Cd extends BaseUtility {\n\tprivate goToPreviousLocation() {\n\t\tconst newLocation = store.getState().previousLocationStack[0];\n\n\t\tstore.dispatch({\n\t\t\ttype: ActionTypes.POP_LOCATION_STACK\n\t\t});\n\n\t\tif (newLocation) {\n\t\t\tstore.dispatch({\n\t\t\t\ttype: ActionTypes.SET_LOCATION,\n\t\t\t\tvalue: newLocation\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate goToLocation = (location: string) => {\n\t\tif (location === '..') {\n\t\t\tthis.goToPreviousLocation();\n\t\t\treturn;\n\t\t}\n\n\t\tconst newLocation = getCurrentLocation().neighborSlugs.find(\n\t\t\t(slug: string) => slug === location\n\t\t);\n\n\t\tif (!newLocation) {\n\t\t\tthrow {\n\t\t\t\tcode: INVALID_LOCATION,\n\t\t\t\tmessage: `${location} is an invalid location`\n\t\t\t};\n\t\t}\n\n\t\tstore.dispatch({\n\t\t\ttype: ActionTypes.PUSH_LOCATION_STACK,\n\t\t\tvalue: store.getState().location\n\t\t});\n\n\t\tstore.dispatch({\n\t\t\ttype: ActionTypes.SET_LOCATION,\n\t\t\tvalue: newLocation\n\t\t});\n\t};\n\n\t_run({ args, output }: PrivateRunParams): Promise<null> {\n\t\tconst {\n\t\t\tlocation: initialLocation,\n\t\t\tpreviousLocationStack: initialStack\n\t\t} = store.getState();\n\n\t\ttry {\n\t\t\targs[0]\n\t\t\t\t.split('/')\n\t\t\t\t.filter(location => location)\n\t\t\t\t.forEach(this.goToLocation);\n\t\t} catch (e) {\n\t\t\tif (e.code === INVALID_LOCATION) {\n\t\t\t\toutput({ content: e.message });\n\n\t\t\t\tstore.dispatch({\n\t\t\t\t\ttype: ActionTypes.SET_LOCATION,\n\t\t\t\t\tvalue: initialLocation\n\t\t\t\t});\n\n\t\t\t\tstore.dispatch({\n\t\t\t\t\ttype: ActionTypes.SET_LOCATION_STACK,\n\t\t\t\t\tvalue: initialStack\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t}\n\n\t\tsetUrlLocation({\n\t\t\tlocation: store.getState().location\n\t\t});\n\n\t\treturn Promise.resolve(null);\n\t}\n\n\t// TODO: This doesn't handle .. in the chain\n\t// e.g. place1/place2/../place2 crashes\n\tgetTabCompleteOptions = (path: string): string[] => {\n\t\tconst locations = path.split('/');\n\n\t\tconst locationChain = locations.splice(0, locations.length - 1);\n\t\tconst finalFragment = locations[locations.length - 1];\n\n\t\tif (!this.locationChainValid(locationChain)) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst finalLocationInChain =\n\t\t\tlocationChain.length === 0\n\t\t\t\t? getCurrentLocation()\n\t\t\t\t: LocationManifest[locationChain[locationChain.length - 1]];\n\n\t\tif (!finalLocationInChain) {\n\t\t\t// in the case of '..', which is valid but not currently working\n\t\t\treturn [];\n\t\t}\n\n\t\tconst options = finalLocationInChain.neighborSlugs.filter(\n\t\t\t(slug: string) => slug.indexOf(finalFragment) === 0\n\t\t);\n\n\t\tif (options.length === 1) {\n\t\t\tconst path =\n\t\t\t\tlocationChain.length === 0 ? '' : `${locationChain.join('/')}/`;\n\t\t\treturn [`${path}${options[0]}/`];\n\t\t}\n\n\t\treturn options;\n\t};\n\n\tprivate locationChainValid = (locations: string[]): boolean => {\n\t\tif (locations.length === 0) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// for some reason TS won't let me return the result of this reduce directly\n\t\tconst valid = locations.reduce((memo, location, i, arr) => {\n\t\t\tif (i === 0) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (!memo) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst prevLocation = LocationManifest[arr[i - 1]];\n\n\t\t\t// should be\n\t\t\t// return prevLocation.neighborSlugs.indexOf(location) >= 0 || location === '..';\n\t\t\treturn prevLocation.neighborSlugs.indexOf(location) >= 0;\n\t\t}, true);\n\n\t\treturn valid;\n\t};\n\n\tcommand = 'goto';\n\taliases = ['cd', 'go', 'g'];\n\thelpDescription =\n\t\t'Use goto to move to a new location. For example:\\n\\n goto a_cold_cabin';\n}\n\nexport function setUrlLocation({ location }: { location: string }): void {\n\twindow.location.hash = location;\n}\n","import React from 'react';\nimport BaseUtility, { PrivateRunParams } from './BaseUtility';\n\ninterface State {\n\tcontent: string;\n}\n\nclass TimeComponent extends React.Component<{}, State> {\n\tprivate interval: number = 0;\n\n\tstate: State = {\n\t\tcontent: new Date().getTime().toString()\n\t};\n\n\tcomponentDidMount() {\n\t\tthis.interval = window.setInterval(() => {\n\t\t\tthis.setState({ content: new Date().getTime().toString() });\n\t\t}, 1000);\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.clearInterval(this.interval);\n\t}\n\n\trender() {\n\t\treturn this.state.content;\n\t}\n}\n\nexport default class Time extends BaseUtility {\n\t_run({ output }: PrivateRunParams): Promise<null> {\n\t\toutput({ content: <TimeComponent /> });\n\n\t\treturn Promise.resolve(null);\n\t}\n\n\tcommand = 'time';\n\thelpDescription = 'time tells you the time';\n}\n","import BaseUtility, { PrivateRunParams } from './BaseUtility';\nimport store, { ActionTypes, getCurrentLocation } from '../store';\nimport ItemManifest from '../nouns/ItemManifest';\n\nexport default class Pickup extends BaseUtility {\n\t_run({ args, output }: PrivateRunParams): Promise<null> {\n\t\tconst item = args[0];\n\n\t\tif (\n\t\t\tItemManifest[item] &&\n\t\t\tgetCurrentLocation().itemSlugs.indexOf(item) > -1\n\t\t) {\n\t\t\tif (ItemManifest[item].takeable) {\n\t\t\t\tgetCurrentLocation().itemSlugs = getCurrentLocation().itemSlugs.filter(\n\t\t\t\t\titemSlug => itemSlug !== item\n\t\t\t\t);\n\n\t\t\t\tstore.dispatch({\n\t\t\t\t\ttype: ActionTypes.ADD_TO_INVENTORY,\n\t\t\t\t\tvalue: item\n\t\t\t\t});\n\n\t\t\t\toutput({ content: `You have picked up ${item}` });\n\t\t\t} else {\n\t\t\t\toutput({ content: `You cannot pick up ${item}` });\n\t\t\t}\n\t\t} else {\n\t\t\toutput({ content: `There is no ${item} here` });\n\t\t}\n\n\t\treturn Promise.resolve(null);\n\t}\n\n\tcommand = 'pickup';\n\thelpDescription =\n\t\t'pickup will allow you to add an object to your inventory';\n\taliases = ['get', 'grab'];\n}\n","import BaseUtility, { PrivateRunParams } from './BaseUtility';\nimport store from '../store';\nimport { TAB_WIDTH } from '../components/Terminal';\n\nexport default class Inventory extends BaseUtility {\n\t_run({ output }: PrivateRunParams): Promise<null> {\n\t\toutput({ content: store.getState().inventory.join(TAB_WIDTH) });\n\t\treturn Promise.resolve(null);\n\t}\n\n\tcommand = 'inventory';\n\thelpDescription = 'List all the items currently in your inventory.';\n\taliases = ['inv'];\n}\n","import BaseUtility, { PrivateRunParams } from './BaseUtility';\nimport store, { ActionTypes } from '../store';\n\nexport default class Mute extends BaseUtility {\n\t_run({ output }: PrivateRunParams): Promise<null> {\n\t\tstore.dispatch({ type: ActionTypes.TOGGLE_SOUND });\n\n\t\toutput({\n\t\t\tcontent: `Sound has been turned ${\n\t\t\t\tstore.getState().soundOn ? 'on' : 'off'\n\t\t\t}.`\n\t\t});\n\n\t\treturn Promise.resolve(null);\n\t}\n\n\tcommand = 'mute';\n\taliases = ['quiet'];\n\thelpDescription = 'smash the mute button';\n}\n","import BaseUtility, { PrivateRunParams } from './BaseUtility';\nimport OutputController from '../utils/OutputController';\n\nexport default class Clear extends BaseUtility {\n\t_run({  }: PrivateRunParams): Promise<null> {\n\t\tOutputController.clearHistory();\n\t\treturn Promise.resolve(null);\n\t}\n\n\tcommand = 'clear';\n\thelpDescription = 'Clears the screen.';\n\taliases = ['cl'];\n}\n","import Echo from './Echo';\nimport Help from './Help';\nimport BaseUtility from './BaseUtility';\nimport Ls from './Ls';\nimport WhoAmI from './WhoAmI';\nimport Look from './Look';\nimport Cd from './Cd';\nimport Time from './Time';\nimport Pickup from './Pickup';\nimport Inventory from './Inventory';\nimport Mute from './Mute';\nimport Clear from './Clear';\n\nexport const UtilityManifest: { [s: string]: BaseUtility } = {};\nexport const ExtendedUtilityManifest: { [s: string]: BaseUtility } = {};\n\nlet hasRun: boolean = false;\n\nexport function initializeUtilities() {\n\tif (hasRun) {\n\t\treturn;\n\t}\n\n\thasRun = true;\n\n\tconst utilities = [\n\t\tnew Echo(),\n\t\tnew Help(),\n\t\tnew Ls(),\n\t\tnew WhoAmI(),\n\t\tnew Cd(),\n\t\tnew Look(),\n\t\tnew Time(),\n\t\tnew Pickup(),\n\t\tnew Inventory(),\n\t\tnew Mute(),\n\t\tnew Clear()\n\t];\n\n\tutilities.forEach(utility => {\n\t\tUtilityManifest[utility.command] = utility;\n\n\t\tExtendedUtilityManifest[utility.command] = utility;\n\n\t\tutility.aliases.forEach(alias => {\n\t\t\tExtendedUtilityManifest[alias] = utility;\n\t\t});\n\t});\n}\n","import React from 'react';\nimport { RootState } from '../store';\nimport { connect } from 'react-redux';\nimport OutputController from '../utils/OutputController';\n\ninterface Props {\n\tterminalHistory: string[];\n}\n\nfunction TerminalBuffer({ terminalHistory }: Props) {\n\treturn (\n\t\t<div className=\"terminal-buffer\">\n\t\t\t{terminalHistory.map(itemId => (\n\t\t\t\t<p className=\"terminal-buffer-item\" key={itemId}>\n\t\t\t\t\t{OutputController.historyManifest[itemId]}\n\t\t\t\t</p>\n\t\t\t))}\n\t\t</div>\n\t);\n}\n\nconst mapStateToProps = ({ history }: RootState): Props => ({\n\tterminalHistory: history\n});\n\nexport default connect(mapStateToProps)(TerminalBuffer);\n","import React from 'react';\nimport store, { getCurrentLocation } from '../store';\nimport { TAB_WIDTH } from './Terminal';\nimport uuid from '../utils/uuid';\nimport OutputController from '../utils/OutputController';\nimport { ExtendedUtilityManifest } from '../utilities/UtilityManifest';\n\ninterface CommandItem {\n\tcontent: string;\n\tid: string;\n}\n\ninterface Props {\n\thandleSubmit: (arg: string) => void;\n}\n\ninterface State {\n\tcommandHistory: CommandItem[];\n\tcurrentPlaceInHistory: number;\n\tinputValue: string;\n}\n\nexport default class TerminalInput extends React.Component<Props, State> {\n\tstate: State = {\n\t\tcommandHistory: [],\n\t\tcurrentPlaceInHistory: -1,\n\t\tinputValue: ''\n\t};\n\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.inputEl = React.createRef();\n\t}\n\n\tprivate inputEl: React.RefObject<HTMLInputElement>;\n\n\tprivate focusInput = () => {\n\t\tthis.inputEl.current && this.inputEl.current.focus();\n\t};\n\n\tcomponentDidMount() {\n\t\twindow.addEventListener('click', this.focusInput);\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('click', this.focusInput);\n\t}\n\n\tprivate goBackInHistory = () => {\n\t\tthis.setState(\n\t\t\tstate => {\n\t\t\t\tif (\n\t\t\t\t\tstate.currentPlaceInHistory ===\n\t\t\t\t\tstate.commandHistory.length - 1\n\t\t\t\t) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tcurrentPlaceInHistory: state.currentPlaceInHistory + 1\n\t\t\t\t};\n\t\t\t},\n\t\t\t() => {\n\t\t\t\tconst command = this.state.commandHistory[\n\t\t\t\t\tthis.state.currentPlaceInHistory\n\t\t\t\t];\n\n\t\t\t\tif (command) {\n\t\t\t\t\tthis.setState({ inputValue: command.content });\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t};\n\n\tprivate goForwardInHistory = () => {\n\t\tthis.setState(\n\t\t\tstate => {\n\t\t\t\tif (state.currentPlaceInHistory === -1) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tcurrentPlaceInHistory: state.currentPlaceInHistory - 1\n\t\t\t\t};\n\t\t\t},\n\t\t\t() => {\n\t\t\t\tif (this.state.currentPlaceInHistory === -1) {\n\t\t\t\t\tthis.setState({ inputValue: '' });\n\t\t\t\t}\n\n\t\t\t\tconst command = this.state.commandHistory[\n\t\t\t\t\tthis.state.currentPlaceInHistory\n\t\t\t\t];\n\n\t\t\t\tif (command) {\n\t\t\t\t\tthis.setState({ inputValue: command.content });\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t};\n\n\tprivate moveCursorToEnd = () => {\n\t\twindow.setTimeout(() => {\n\t\t\tif (this.inputEl.current) {\n\t\t\t\tthis.inputEl.current.selectionStart = 1000;\n\t\t\t}\n\t\t}, 0);\n\t};\n\n\tprivate handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n\t\tthis.setState({ inputValue: (e.target as HTMLInputElement).value });\n\t};\n\n\tprivate handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n\t\tswitch (e.key) {\n\t\t\tcase 'ArrowUp':\n\t\t\t\tthis.goBackInHistory();\n\t\t\t\tthis.moveCursorToEnd();\n\t\t\t\tbreak;\n\t\t\tcase 'ArrowDown':\n\t\t\t\tthis.goForwardInHistory();\n\t\t\t\tthis.moveCursorToEnd();\n\t\t\t\tbreak;\n\t\t\tcase 'Tab':\n\t\t\t\te.preventDefault();\n\t\t\t\tthis.tabComplete();\n\t\t\t\tbreak;\n\t\t\tcase 'Enter':\n\t\t\t\te.preventDefault();\n\t\t\t\tthis.addToCommandHistory(this.state.inputValue);\n\t\t\t\tthis.props.handleSubmit(this.state.inputValue);\n\t\t\t\tthis.setState({ inputValue: '' });\n\n\t\t\tdefault:\n\t\t}\n\t};\n\n\tprivate addToCommandHistory = (value: string) => {\n\t\tthis.setState(state => ({\n\t\t\tcommandHistory: [\n\t\t\t\t{\n\t\t\t\t\tcontent: value,\n\t\t\t\t\tid: uuid()\n\t\t\t\t},\n\t\t\t\t...state.commandHistory\n\t\t\t],\n\t\t\tcurrentPlaceInHistory: -1\n\t\t}));\n\t};\n\n\tprivate tabComplete = () => {\n\t\tconst [command, ...rest] = this.state.inputValue.split(' ');\n\n\t\tif (rest.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst lastValue = rest[rest.length - 1] || '';\n\n\t\tconst utility = ExtendedUtilityManifest[command];\n\n\t\tconst options =\n\t\t\tutility && utility.getTabCompleteOptions\n\t\t\t\t? utility.getTabCompleteOptions(lastValue)\n\t\t\t\t: [\n\t\t\t\t\t\t...getCurrentLocation().neighborSlugs,\n\t\t\t\t\t\t...getCurrentLocation().itemSlugs,\n\t\t\t\t\t\t...store.getState().inventory\n\t\t\t\t  ].filter((slug: string) => slug.indexOf(lastValue) === 0);\n\n\t\tswitch (options.length) {\n\t\t\tcase 0:\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\tconst newValue = [\n\t\t\t\t\tcommand,\n\t\t\t\t\t...rest.slice(0, rest.length - 1),\n\t\t\t\t\toptions[0]\n\t\t\t\t].join(' ');\n\t\t\t\tthis.setState({ inputValue: newValue });\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tOutputController.output({\n\t\t\t\t\tcontent: options.join(TAB_WIDTH)\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<input\n\t\t\t\tclassName=\"input\"\n\t\t\t\ttype=\"text\"\n\t\t\t\tonKeyDown={this.handleKeyDown}\n\t\t\t\tonChange={this.handleChange}\n\t\t\t\tref={this.inputEl}\n\t\t\t\tvalue={this.state.inputValue}\n\t\t\t/>\n\t\t);\n\t}\n}\n","import React from 'react';\nimport { ExtendedUtilityManifest } from '../utilities/UtilityManifest';\nimport store, { ActionTypes, RootState } from '../store';\nimport { connect } from 'react-redux';\nimport TerminalBuffer from './TerminalBuffer';\nimport TerminalInput from './TerminalInput';\nimport OutputController from '../utils/OutputController';\n\nexport type HistoryItemContent = string | JSX.Element;\n\nexport interface HistoryItem {\n\tcontent: HistoryItemContent;\n\tid: string;\n}\n\ninterface TerminalProps {\n\tconsoleInteractive: boolean;\n}\n\nfunction inputPrompt(): string {\n\treturn `~/${store.getState().location} > `;\n}\n\nexport const TAB_WIDTH = '    ';\n\nclass Terminal extends React.Component<TerminalProps, {}> {\n\tprivate handleKeydown = (e: Event) => {\n\t\tconst typedEvent = (e as any) as React.KeyboardEvent;\n\n\t\tconst { key } = typedEvent;\n\n\t\tif (\n\t\t\tkey === 'Escape' ||\n\t\t\t(typedEvent.ctrlKey && ['c', 'C', 'd', 'D'].indexOf(key) >= 0)\n\t\t) {\n\t\t\tOutputController.stopOutput();\n\t\t}\n\t};\n\n\tcomponentDidMount() {\n\t\twindow.addEventListener('keydown', this.handleKeydown);\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('keydown', this.handleKeydown);\n\t}\n\n\tprivate runCommand = (value: string) => {\n\t\tconst [utilityName, ...args] = value.split(' ');\n\n\t\tconst utility = ExtendedUtilityManifest[utilityName];\n\n\t\tOutputController.output({ content: `${inputPrompt()}${value}` });\n\n\t\tif (utility) {\n\t\t\tstore.dispatch({ type: ActionTypes.LOCK_CONSOLE });\n\n\t\t\tutility\n\t\t\t\t.run({ args })\n\t\t\t\t.then(() => {\n\t\t\t\t\tstore.dispatch({ type: ActionTypes.RELEASE_CONSOLE });\n\t\t\t\t})\n\t\t\t\t.catch(console.error);\n\t\t} else {\n\t\t\tOutputController.output({\n\t\t\t\tcontent: `I don't know how to ${utilityName}`\n\t\t\t});\n\t\t}\n\t};\n\n\trender() {\n\t\tconst { consoleInteractive } = this.props;\n\n\t\treturn (\n\t\t\t<div className=\"terminal\">\n\t\t\t\t<TerminalBuffer />\n\n\t\t\t\t<form\n\t\t\t\t\tclassName={`input-form ${\n\t\t\t\t\t\tconsoleInteractive ? 'active' : ''\n\t\t\t\t\t}`}\n\t\t\t\t>\n\t\t\t\t\t<span className=\"input-prompt\">{inputPrompt()}</span>\n\n\t\t\t\t\t<TerminalInput handleSubmit={this.runCommand} />\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nconst mapStateToProps = ({ consoleInteractive }: RootState): TerminalProps => ({\n\tconsoleInteractive\n});\n\nexport default connect(mapStateToProps)(Terminal);\n","import React from 'react';\nimport Terminal from './Terminal';\nimport { initializeLocations } from '../nouns/LocationManifest';\nimport { initializeUtilities } from '../utilities/UtilityManifest';\nimport store, { ActionTypes } from '../store';\nimport { initializeItems } from '../nouns/ItemManifest';\nimport { setUrlLocation } from '../utilities/Cd';\nimport OutputController from '../utils/OutputController';\n\nconst INITIAL_LOCATION_SLUG = 'a_quiet_forest';\n\nexport default class App extends React.Component<{}, {}> {\n\tconstructor(props: {}) {\n\t\tsuper(props);\n\n\t\tinitializeLocations();\n\t\tinitializeUtilities();\n\t\tinitializeItems();\n\n\t\tsetUrlLocation({ location: INITIAL_LOCATION_SLUG });\n\n\t\tstore.dispatch({\n\t\t\ttype: ActionTypes.SET_LOCATION,\n\t\t\tvalue: INITIAL_LOCATION_SLUG\n\t\t});\n\n\t\tOutputController.output({\n\t\t\tcontent:\n\t\t\t\t'The Nature of the Beast:\\nA work of interactive fiction by Vincent Colavin.\\n\\n\\nThis game reads descriptions out loud by default. Type \"quiet\" or \"mute\" to disable the audio.\\nPress escape to shorten a description.\\nType \"help\" for additional instructions.'\n\t\t});\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"main\">\n\t\t\t\t<Terminal />\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './styles/index.scss';\nimport App from './components/App';\n\nimport { Provider } from 'react-redux';\nimport store from './store';\n\nReactDOM.render(\n\t<Provider store={store}>\n\t\t<App />\n\t</Provider>,\n\tdocument.getElementById('root')\n);\n"],"sourceRoot":""}